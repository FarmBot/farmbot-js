parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({6:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LATEST_VERSION=20180209,exports.DIGITAL=0,exports.ANALOG=1;
},{}],61:[function(require,module,exports) {
function e(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function t(e){return"function"==typeof e}function s(e){return"number"==typeof e}function n(e){return"object"==typeof e&&null!==e}function i(e){return void 0===e}module.exports=e,e.EventEmitter=e,e.prototype._events=void 0,e.prototype._maxListeners=void 0,e.defaultMaxListeners=10,e.prototype.setMaxListeners=function(e){if(!s(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},e.prototype.emit=function(e){var s,r,o,h,v,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||n(this._events.error)&&!this._events.error.length)){if((s=arguments[1])instanceof Error)throw s;var u=new Error('Uncaught, unspecified "error" event. ('+s+")");throw u.context=s,u}if(i(r=this._events[e]))return!1;if(t(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:h=Array.prototype.slice.call(arguments,1),r.apply(this,h)}else if(n(r))for(h=Array.prototype.slice.call(arguments,1),o=(l=r.slice()).length,v=0;v<o;v++)l[v].apply(this,h);return!0},e.prototype.addListener=function(s,r){var o;if(!t(r))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",s,t(r.listener)?r.listener:r),this._events[s]?n(this._events[s])?this._events[s].push(r):this._events[s]=[this._events[s],r]:this._events[s]=r,n(this._events[s])&&!this._events[s].warned&&(o=i(this._maxListeners)?e.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[s].length>o&&(this._events[s].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[s].length),"function"==typeof console.trace&&console.trace()),this},e.prototype.on=e.prototype.addListener,e.prototype.once=function(e,s){if(!t(s))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(e,i),n||(n=!0,s.apply(this,arguments))}return i.listener=s,this.on(e,i),this},e.prototype.removeListener=function(e,s){var i,r,o,h;if(!t(s))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(i=this._events[e]).length,r=-1,i===s||t(i.listener)&&i.listener===s)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,s);else if(n(i)){for(h=o;h-- >0;)if(i[h]===s||i[h].listener&&i[h].listener===s){r=h;break}if(r<0)return this;1===i.length?(i.length=0,delete this._events[e]):i.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,s)}return this},e.prototype.removeAllListeners=function(e){var s,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(s in this._events)"removeListener"!==s&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events={},this}if(t(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},e.prototype.listeners=function(e){return this._events&&this._events[e]?t(this._events[e])?[this._events[e]]:this._events[e].slice():[]},e.prototype.listenerCount=function(e){if(this._events){var s=this._events[e];if(t(s))return 1;if(s)return s.length}return 0},e.listenerCount=function(e,t){return e.listenerCount(t)};
},{}],57:[function(require,module,exports) {
module.exports=o;var r=Object.prototype.hasOwnProperty;function o(){for(var o={},t=0;t<arguments.length;t++){var e=arguments[t];for(var a in e)r.call(e,a)&&(o[a]=e[a])}return o}
},{}],56:[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(e){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(t){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],101:[function(require,module,exports) {
var process = require("process");
var n=require("process");function e(e,r,t,c){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var i,l,u=arguments.length;switch(u){case 0:case 1:return n.nextTick(e);case 2:return n.nextTick(function(){e.call(null,r)});case 3:return n.nextTick(function(){e.call(null,r,t)});case 4:return n.nextTick(function(){e.call(null,r,t,c)});default:for(i=new Array(u-1),l=0;l<i.length;)i[l++]=arguments[l];return n.nextTick(function(){e.apply(null,i)})}}!n.version||0===n.version.indexOf("v0.")||0===n.version.indexOf("v1.")&&0!==n.version.indexOf("v1.8.")?module.exports={nextTick:e}:module.exports=n;
},{"process":56}],109:[function(require,module,exports) {
var r={}.toString;module.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)};
},{}],106:[function(require,module,exports) {
module.exports=require("events").EventEmitter;
},{"events":61}],155:[function(require,module,exports) {
"use strict";exports.byteLength=u,exports.toByteArray=i,exports.fromByteArray=d;for(var r=[],t=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=n.length;o<a;++o)r[o]=n[o],t[n.charCodeAt(o)]=o;function h(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");return-1===e&&(e=t),[e,e===t?0:4-e%4]}function u(r){var t=h(r),e=t[0],n=t[1];return 3*(e+n)/4-n}function c(r,t,e){return 3*(t+e)/4-e}function i(r){for(var n,o=h(r),a=o[0],u=o[1],i=new e(c(r,a,u)),f=0,A=u>0?a-4:a,d=0;d<A;d+=4)n=t[r.charCodeAt(d)]<<18|t[r.charCodeAt(d+1)]<<12|t[r.charCodeAt(d+2)]<<6|t[r.charCodeAt(d+3)],i[f++]=n>>16&255,i[f++]=n>>8&255,i[f++]=255&n;return 2===u&&(n=t[r.charCodeAt(d)]<<2|t[r.charCodeAt(d+1)]>>4,i[f++]=255&n),1===u&&(n=t[r.charCodeAt(d)]<<10|t[r.charCodeAt(d+1)]<<4|t[r.charCodeAt(d+2)]>>2,i[f++]=n>>8&255,i[f++]=255&n),i}function f(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function A(r,t,e){for(var n,o=[],a=t;a<e;a+=3)n=(r[a]<<16&16711680)+(r[a+1]<<8&65280)+(255&r[a+2]),o.push(f(n));return o.join("")}function d(t){for(var e,n=t.length,o=n%3,a=[],h=0,u=n-o;h<u;h+=16383)a.push(A(t,h,h+16383>u?u:h+16383));return 1===o?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),a.join("")}t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63;
},{}],156:[function(require,module,exports) {
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),(o+=p+N>=1?n/f:n*Math.pow(2,1-N))*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};
},{}],119:[function(require,module,exports) {

var global = arguments[3];
var t=arguments[3],r=require("base64-js"),e=require("ieee754"),n=require("isarray");function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}function o(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,r){if(o()<r)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r)).__proto__=f.prototype:(null===t&&(t=new f(r)),t.length=r),t}function f(t,r,e){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(t,r,e);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,r,e)}function s(t,r,e,n){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?g(t,r,e,n):"string"==typeof r?l(t,r,e):y(t,r)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function a(t,r,e,n){return h(r),r<=0?u(t,r):void 0!==e?"string"==typeof n?u(t,r).fill(e,n):u(t,r).fill(e):u(t,r)}function c(t,r){if(h(r),t=u(t,r<0?0:0|w(r)),!f.TYPED_ARRAY_SUPPORT)for(var e=0;e<r;++e)t[e]=0;return t}function l(t,r,e){if("string"==typeof e&&""!==e||(e="utf8"),!f.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(r,e),i=(t=u(t,n)).write(r,e);return i!==n&&(t=t.slice(0,i)),t}function p(t,r){var e=r.length<0?0:0|w(r.length);t=u(t,e);for(var n=0;n<e;n+=1)t[n]=255&r[n];return t}function g(t,r,e,n){if(r.byteLength,e<0||r.byteLength<e)throw new RangeError("'offset' is out of bounds");if(r.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return r=void 0===e&&void 0===n?new Uint8Array(r):void 0===n?new Uint8Array(r,e):new Uint8Array(r,e,n),f.TYPED_ARRAY_SUPPORT?(t=r).__proto__=f.prototype:t=p(t,r),t}function y(t,r){if(f.isBuffer(r)){var e=0|w(r.length);return 0===(t=u(t,e)).length?t:(r.copy(t,0,0,e),t)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||W(r.length)?u(t,0):p(t,r);if("Buffer"===r.type&&n(r.data))return p(t,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function w(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function d(t){return+t!=t&&(t=0),f.alloc(+t)}function v(t,r){if(f.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var n=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return K(t).length;default:if(n)return $(t).length;r=(""+r).toLowerCase(),n=!0}}function E(t,r,e){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if((e>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,r,e);case"utf8":case"utf-8":return Y(this,r,e);case"ascii":return L(this,r,e);case"latin1":case"binary":return D(this,r,e);case"base64":return S(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function R(t,r,e,n,i){if(0===t.length)return-1;if("string"==typeof e?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(i)return-1;e=t.length-1}else if(e<0){if(!i)return-1;e=0}if("string"==typeof r&&(r=f.from(r,n)),f.isBuffer(r))return 0===r.length?-1:_(t,r,e,n,i);if("number"==typeof r)return r&=255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,r,e):Uint8Array.prototype.lastIndexOf.call(t,r,e):_(t,[r],e,n,i);throw new TypeError("val must be string, number or Buffer")}function _(t,r,e,n,i){var o,u=1,f=t.length,s=r.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return-1;u=2,f/=2,s/=2,e/=2}function h(t,r){return 1===u?t[r]:t.readUInt16BE(r*u)}if(i){var a=-1;for(o=e;o<f;o++)if(h(t,o)===h(r,-1===a?0:o-a)){if(-1===a&&(a=o),o-a+1===s)return a*u}else-1!==a&&(o-=o-a),a=-1}else for(e+s>f&&(e=f-s),o=e;o>=0;o--){for(var c=!0,l=0;l<s;l++)if(h(t,o+l)!==h(r,l)){c=!1;break}if(c)return o}return-1}function A(t,r,e,n){e=Number(e)||0;var i=t.length-e;n?(n=Number(n))>i&&(n=i):n=i;var o=r.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var u=0;u<n;++u){var f=parseInt(r.substr(2*u,2),16);if(isNaN(f))return u;t[e+u]=f}return u}function m(t,r,e,n){return Q($(r,t.length-e),t,e,n)}function P(t,r,e,n){return Q(G(r),t,e,n)}function T(t,r,e,n){return P(t,r,e,n)}function B(t,r,e,n){return Q(K(r),t,e,n)}function U(t,r,e,n){return Q(H(r,t.length-e),t,e,n)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function Y(t,r,e){e=Math.min(t.length,e);for(var n=[],i=r;i<e;){var o,u,f,s,h=t[i],a=null,c=h>239?4:h>223?3:h>191?2:1;if(i+c<=e)switch(c){case 1:h<128&&(a=h);break;case 2:128==(192&(o=t[i+1]))&&(s=(31&h)<<6|63&o)>127&&(a=s);break;case 3:o=t[i+1],u=t[i+2],128==(192&o)&&128==(192&u)&&(s=(15&h)<<12|(63&o)<<6|63&u)>2047&&(s<55296||s>57343)&&(a=s);break;case 4:o=t[i+1],u=t[i+2],f=t[i+3],128==(192&o)&&128==(192&u)&&128==(192&f)&&(s=(15&h)<<18|(63&o)<<12|(63&u)<<6|63&f)>65535&&s<1114112&&(a=s)}null===a?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=c}return O(n)}exports.Buffer=f,exports.SlowBuffer=d,exports.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),exports.kMaxLength=o(),f.poolSize=8192,f._augment=function(t){return t.__proto__=f.prototype,t},f.from=function(t,r,e){return s(null,t,r,e)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(t,r,e){return a(null,t,r,e)},f.allocUnsafe=function(t){return c(null,t)},f.allocUnsafeSlow=function(t){return c(null,t)},f.isBuffer=function(t){return!(null==t||!t._isBuffer)},f.compare=function(t,r){if(!f.isBuffer(t)||!f.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var e=t.length,n=r.length,i=0,o=Math.min(e,n);i<o;++i)if(t[i]!==r[i]){e=t[i],n=r[i];break}return e<n?-1:n<e?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,r){if(!n(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);var e;if(void 0===r)for(r=0,e=0;e<t.length;++e)r+=t[e].length;var i=f.allocUnsafe(r),o=0;for(e=0;e<t.length;++e){var u=t[e];if(!f.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(i,o),o+=u.length}return i},f.byteLength=v,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)b(this,r,r+1);return this},f.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)b(this,r,r+3),b(this,r+1,r+2);return this},f.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)b(this,r,r+7),b(this,r+1,r+6),b(this,r+2,r+5),b(this,r+3,r+4);return this},f.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Y(this,0,t):E.apply(this,arguments)},f.prototype.equals=function(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===f.compare(this,t)},f.prototype.inspect=function(){var t="",r=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},f.prototype.compare=function(t,r,e,n,i){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===e&&(e=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),r<0||e>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&r>=e)return 0;if(n>=i)return-1;if(r>=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),u=(e>>>=0)-(r>>>=0),s=Math.min(o,u),h=this.slice(n,i),a=t.slice(r,e),c=0;c<s;++c)if(h[c]!==a[c]){o=h[c],u=a[c];break}return o<u?-1:u<o?1:0},f.prototype.includes=function(t,r,e){return-1!==this.indexOf(t,r,e)},f.prototype.indexOf=function(t,r,e){return R(this,t,r,e,!0)},f.prototype.lastIndexOf=function(t,r,e){return R(this,t,r,e,!1)},f.prototype.write=function(t,r,e,n){if(void 0===r)n="utf8",e=this.length,r=0;else if(void 0===e&&"string"==typeof r)n=r,e=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(e)?(e|=0,void 0===n&&(n="utf8")):(n=e,e=void 0)}var i=this.length-r;if((void 0===e||e>i)&&(e=i),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return A(this,t,r,e);case"utf8":case"utf-8":return m(this,t,r,e);case"ascii":return P(this,t,r,e);case"latin1":case"binary":return T(this,t,r,e);case"base64":return B(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,r,e);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function O(t){var r=t.length;if(r<=I)return String.fromCharCode.apply(String,t);for(var e="",n=0;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=I));return e}function L(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(127&t[i]);return n}function D(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]);return n}function x(t,r,e){var n=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=r;o<e;++o)i+=Z(t[o]);return i}function C(t,r,e){for(var n=t.slice(r,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function M(t,r,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function k(t,r,e,n,i,o){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<o)throw new RangeError('"value" argument is out of bounds');if(e+n>t.length)throw new RangeError("Index out of range")}function N(t,r,e,n){r<0&&(r=65535+r+1);for(var i=0,o=Math.min(t.length-e,2);i<o;++i)t[e+i]=(r&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function z(t,r,e,n){r<0&&(r=4294967295+r+1);for(var i=0,o=Math.min(t.length-e,4);i<o;++i)t[e+i]=r>>>8*(n?i:3-i)&255}function F(t,r,e,n,i,o){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function j(t,r,n,i,o){return o||F(t,r,n,4,3.4028234663852886e38,-3.4028234663852886e38),e.write(t,r,n,i,23,4),n+4}function q(t,r,n,i,o){return o||F(t,r,n,8,1.7976931348623157e308,-1.7976931348623157e308),e.write(t,r,n,i,52,8),n+8}f.prototype.slice=function(t,r){var e,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<t&&(r=t),f.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,r)).__proto__=f.prototype;else{var i=r-t;e=new f(i,void 0);for(var o=0;o<i;++o)e[o]=this[o+t]}return e},f.prototype.readUIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n},f.prototype.readUIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t+--r],i=1;r>0&&(i*=256);)n+=this[t+--r]*i;return n},f.prototype.readUInt8=function(t,r){return r||M(t,1,this.length),this[t]},f.prototype.readUInt16LE=function(t,r){return r||M(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUInt16BE=function(t,r){return r||M(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUInt32LE=function(t,r){return r||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readUInt32BE=function(t,r){return r||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*r)),n},f.prototype.readIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=r,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*r)),o},f.prototype.readInt8=function(t,r){return r||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},f.prototype.readInt16LE=function(t,r){r||M(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt16BE=function(t,r){r||M(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt32LE=function(t,r){return r||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,r){return r||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readFloatLE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!1,52,8)},f.prototype.writeUIntLE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=1,o=0;for(this[r]=255&t;++o<e&&(i*=256);)this[r+o]=t/i&255;return r+e},f.prototype.writeUIntBE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=e-1,o=1;for(this[r+i]=255&t;--i>=0&&(o*=256);)this[r+i]=t/o&255;return r+e},f.prototype.writeUInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,255,0),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},f.prototype.writeUInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeUInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeUInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):z(this,t,r,!0),r+4},f.prototype.writeUInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeIntLE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=0,u=1,f=0;for(this[r]=255&t;++o<e&&(u*=256);)t<0&&0===f&&0!==this[r+o-1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeIntBE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=e-1,u=1,f=0;for(this[r+o]=255&t;--o>=0&&(u*=256);)t<0&&0===f&&0!==this[r+o+1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,127,-128),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},f.prototype.writeInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):z(this,t,r,!0),r+4},f.prototype.writeInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeFloatLE=function(t,r,e){return j(this,t,r,!0,e)},f.prototype.writeFloatBE=function(t,r,e){return j(this,t,r,!1,e)},f.prototype.writeDoubleLE=function(t,r,e){return q(this,t,r,!0,e)},f.prototype.writeDoubleBE=function(t,r,e){return q(this,t,r,!1,e)},f.prototype.copy=function(t,r,e,n){if(e||(e=0),n||0===n||(n=this.length),r>=t.length&&(r=t.length),r||(r=0),n>0&&n<e&&(n=e),n===e)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-r<n-e&&(n=t.length-r+e);var i,o=n-e;if(this===t&&e<r&&r<n)for(i=o-1;i>=0;--i)t[i+r]=this[i+e];else if(o<1e3||!f.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+r]=this[i+e];else Uint8Array.prototype.set.call(t,this.subarray(e,e+o),r);return o},f.prototype.fill=function(t,r,e,n){if("string"==typeof t){if("string"==typeof r?(n=r,r=0,e=this.length):"string"==typeof e&&(n=e,e=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<e)throw new RangeError("Out of range index");if(e<=r)return this;var o;if(r>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(o=r;o<e;++o)this[o]=t;else{var u=f.isBuffer(t)?t:$(new f(t,n).toString()),s=u.length;for(o=0;o<e-r;++o)this[o+r]=u[o%s]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function X(t){if((t=J(t).replace(V,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function J(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Z(t){return t<16?"0"+t.toString(16):t.toString(16)}function $(t,r){var e;r=r||1/0;for(var n=t.length,i=null,o=[],u=0;u<n;++u){if((e=t.charCodeAt(u))>55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(u+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(r-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function G(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}function H(t,r){for(var e,n,i,o=[],u=0;u<t.length&&!((r-=2)<0);++u)n=(e=t.charCodeAt(u))>>8,i=e%256,o.push(i),o.push(n);return o}function K(t){return r.toByteArray(X(t))}function Q(t,r,e,n){for(var i=0;i<n&&!(i+e>=r.length||i>=t.length);++i)r[i+e]=t[i];return i}function W(t){return t!=t}
},{"base64-js":155,"ieee754":156,"isarray":109,"buffer":119}],84:[function(require,module,exports) {

var r=require("buffer"),e=r.Buffer;function n(r,e){for(var n in r)e[n]=r[n]}function o(r,n,o){return e(r,n,o)}e.from&&e.alloc&&e.allocUnsafe&&e.allocUnsafeSlow?module.exports=r:(n(r,exports),exports.Buffer=o),n(e,o),o.from=function(r,n,o){if("number"==typeof r)throw new TypeError("Argument must not be a number");return e(r,n,o)},o.alloc=function(r,n,o){if("number"!=typeof r)throw new TypeError("Argument must be a number");var f=e(r);return void 0!==n?"string"==typeof o?f.fill(n,o):f.fill(n):f.fill(0),f},o.allocUnsafe=function(r){if("number"!=typeof r)throw new TypeError("Argument must be a number");return e(r)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)};
},{"buffer":119}],102:[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var r=require("buffer").Buffer;function t(r){return Array.isArray?Array.isArray(r):"[object Array]"===a(r)}function e(r){return"boolean"==typeof r}function n(r){return null===r}function o(r){return null==r}function i(r){return"number"==typeof r}function u(r){return"string"==typeof r}function s(r){return"symbol"==typeof r}function f(r){return void 0===r}function p(r){return"[object RegExp]"===a(r)}function c(r){return"object"==typeof r&&null!==r}function l(r){return"[object Date]"===a(r)}function y(r){return"[object Error]"===a(r)||r instanceof Error}function x(r){return"function"==typeof r}function b(r){return null===r||"boolean"==typeof r||"number"==typeof r||"string"==typeof r||"symbol"==typeof r||void 0===r}function a(r){return Object.prototype.toString.call(r)}exports.isArray=t,exports.isBoolean=e,exports.isNull=n,exports.isNullOrUndefined=o,exports.isNumber=i,exports.isString=u,exports.isSymbol=s,exports.isUndefined=f,exports.isRegExp=p,exports.isObject=c,exports.isDate=l,exports.isError=y,exports.isFunction=x,exports.isPrimitive=b,exports.isBuffer=r.isBuffer;
},{"buffer":119}],64:[function(require,module,exports) {
"function"==typeof Object.create?module.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t};
},{}],69:[function(require,module,exports) {

},{}],107:[function(require,module,exports) {

"use strict";function t(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var n=require("safe-buffer").Buffer,e=require("util");function i(t,n,e){t.copy(n,e)}module.exports=function(){function e(){t(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(t){var n={data:t,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},e.prototype.unshift=function(t){var n={data:t,next:this.head};0===this.length&&(this.tail=n),this.head=n,++this.length},e.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(t){if(0===this.length)return"";for(var n=this.head,e=""+n.data;n=n.next;)e+=t+n.data;return e},e.prototype.concat=function(t){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var e=n.allocUnsafe(t>>>0),h=this.head,a=0;h;)i(h.data,e,a),a+=h.data.length,h=h.next;return e},e}(),e&&e.inspect&&e.inspect.custom&&(module.exports.prototype[e.inspect.custom]=function(){var t=e.inspect({length:this.length});return this.constructor.name+" "+t});
},{"safe-buffer":84,"util":69}],108:[function(require,module,exports) {
"use strict";var t=require("process-nextick-args");function e(e,a){var r=this,s=this._readableState&&this._readableState.destroyed,d=this._writableState&&this._writableState.destroyed;return s||d?(a?a(e):!e||this._writableState&&this._writableState.errorEmitted||t.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!a&&e?(t.nextTick(i,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):a&&a(e)}),this)}function a(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function i(t,e){t.emit("error",e)}module.exports={destroy:e,undestroy:a};
},{"process-nextick-args":101}],111:[function(require,module,exports) {
var global = arguments[3];
var r=arguments[3];function t(r,t){if(e("noDeprecation"))return r;var n=!1;return function(){if(!n){if(e("throwDeprecation"))throw new Error(t);e("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return r.apply(this,arguments)}}function e(t){try{if(!r.localStorage)return!1}catch(r){return!1}var e=r.localStorage[t];return null!=e&&"true"===String(e).toLowerCase()}module.exports=t;
},{}],71:[function(require,module,exports) {
var process = require("process");

var global = arguments[3];
var e=require("process"),t=arguments[3],n=require("process-nextick-args");function r(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){W(t,e)}}module.exports=g;var o,s=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?setImmediate:n.nextTick;g.WritableState=y;var f=require("core-util-is");f.inherits=require("inherits");var u={deprecate:require("util-deprecate")},a=require("./internal/streams/stream"),c=require("safe-buffer").Buffer,d=t.Uint8Array||function(){};function l(e){return c.from(e)}function h(e){return c.isBuffer(e)||e instanceof d}var b,p=require("./internal/streams/destroy");function w(){}function y(e,t){o=o||require("./_stream_duplex"),e=e||{};var n=t instanceof o;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,s=e.writableHighWaterMark,f=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(s||0===s)?s:f,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var u=!1===e.decodeStrings;this.decodeStrings=!u,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){S(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function g(e){if(o=o||require("./_stream_duplex"),!(b.call(g,this)||this instanceof o))return new g(e);this._writableState=new y(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),a.call(this)}function k(e,t){var r=new Error("write after end");e.emit("error",r),n.nextTick(t,r)}function v(e,t,r,i){var o=!0,s=!1;return null===r?s=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),n.nextTick(i,s),o=!1),o}function q(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=c.from(t,n)),t}function _(e,t,n,r,i,o){if(!n){var s=q(t,r,i);r!==s&&(n=!0,i="buffer",r=s)}var f=t.objectMode?1:r.length;t.length+=f;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var a=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},a?a.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else m(e,t,!1,f,r,i,o);return u}function m(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function x(e,t,r,i,o){--t.pendingcb,r?(n.nextTick(o,i),n.nextTick(T,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(o(i),e._writableState.errorEmitted=!0,e.emit("error",i),T(e,t))}function R(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function S(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(R(n),t)x(e,n,r,t,i);else{var o=E(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||j(e,n),r?s(M,e,n,o,i):M(e,n,o,i)}}function M(e,t,n,r){n||B(e,t),t.pendingcb--,r(),T(e,t)}function B(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function j(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,o=new Array(r),s=t.corkedRequestsFree;s.entry=n;for(var f=0,u=!0;n;)o[f]=n,n.isBuf||(u=!1),n=n.next,f+=1;o.allBuffers=u,m(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;n;){var a=n.chunk,c=n.encoding,d=n.callback;if(m(e,t,!1,t.objectMode?1:a.length,a,c,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function E(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function C(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),T(e,t)})}function P(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,n.nextTick(C,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function T(e,t){var n=E(t);return n&&(P(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}function F(e,t,r){t.ending=!0,T(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function W(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}f.inherits(g,a),y.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(y.prototype,"buffer",{get:u.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(b=Function.prototype[Symbol.hasInstance],Object.defineProperty(g,Symbol.hasInstance,{value:function(e){return!!b.call(this,e)||this===g&&(e&&e._writableState instanceof y)}})):b=function(e){return e instanceof this},g.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},g.prototype.write=function(e,t,n){var r=this._writableState,i=!1,o=!r.objectMode&&h(e);return o&&!c.isBuffer(e)&&(e=l(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=w),r.ended?k(this,n):(o||v(this,r,e,n))&&(r.pendingcb++,i=_(this,r,o,e,t,n)),i},g.prototype.cork=function(){this._writableState.corked++},g.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||j(this,e))},g.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),g.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},g.prototype._writev=null,g.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||F(this,r,n)},Object.defineProperty(g.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),g.prototype.destroy=p.destroy,g.prototype._undestroy=p.undestroy,g.prototype._destroy=function(e,t){this.end(),t(e)};
},{"process-nextick-args":101,"core-util-is":102,"inherits":64,"util-deprecate":111,"./internal/streams/stream":106,"safe-buffer":84,"./internal/streams/destroy":108,"./_stream_duplex":72,"process":56}],72:[function(require,module,exports) {
"use strict";var e=require("process-nextick-args"),t=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};module.exports=l;var r=require("core-util-is");r.inherits=require("inherits");var i=require("./_stream_readable"),a=require("./_stream_writable");r.inherits(l,i);for(var o=t(a.prototype),s=0;s<o.length;s++){var n=o[s];l.prototype[n]||(l.prototype[n]=a.prototype[n])}function l(e){if(!(this instanceof l))return new l(e);i.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||e.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),l.prototype._destroy=function(t,r){this.push(null),this.end(),e.nextTick(r,t)};
},{"process-nextick-args":101,"core-util-is":102,"inherits":64,"./_stream_readable":70,"./_stream_writable":71}],110:[function(require,module,exports) {

"use strict";var t=require("safe-buffer").Buffer,e=t.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function i(i){var a=s(i);if("string"!=typeof a&&(t.isEncoding===e||!e(i)))throw new Error("Unknown encoding: "+i);return a||i}function a(e){var s;switch(this.encoding=i(e),this.encoding){case"utf16le":this.text=c,this.end=f,s=4;break;case"utf8":this.fillLast=l,s=4;break;case"base64":this.text=d,this.end=g,s=3;break;default:return this.write=N,void(this.end=v)}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(s)}function r(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function n(t,e,s){var i=e.length-1;if(i<s)return 0;var a=r(e[i]);return a>=0?(a>0&&(t.lastNeed=a-1),a):--i<s||-2===a?0:(a=r(e[i]))>=0?(a>0&&(t.lastNeed=a-2),a):--i<s||-2===a?0:(a=r(e[i]))>=0?(a>0&&(2===a?a=0:t.lastNeed=a-3),a):0}function h(t,e,s){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}function l(t){var e=this.lastTotal-this.lastNeed,s=h(this,t,e);return void 0!==s?s:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){var s=n(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=s;var i=t.length-(s-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)}function o(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e}function c(t,e){if((t.length-e)%2==0){var s=t.toString("utf16le",e);if(s){var i=s.charCodeAt(s.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],s.slice(0,-1)}return s}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function f(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var s=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,s)}return e}function d(t,e){var s=(t.length-e)%3;return 0===s?t.toString("base64",e):(this.lastNeed=3-s,this.lastTotal=3,1===s?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-s))}function g(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function N(t){return t.toString(this.encoding)}function v(t){return t&&t.length?this.write(t):""}exports.StringDecoder=a,a.prototype.write=function(t){if(0===t.length)return"";var e,s;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";s=this.lastNeed,this.lastNeed=0}else s=0;return s<t.length?e?e+this.text(t,s):this.text(t,s):e||""},a.prototype.end=o,a.prototype.text=u,a.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};
},{"safe-buffer":84}],70:[function(require,module,exports) {

var global = arguments[3];
var process = require("process");
var e=arguments[3],t=require("process"),n=require("process-nextick-args");module.exports=_;var r,i=require("isarray");_.ReadableState=w;var a=require("events").EventEmitter,d=function(e,t){return e.listeners(t).length},o=require("./internal/streams/stream"),s=require("safe-buffer").Buffer,u=e.Uint8Array||function(){};function l(e){return s.from(e)}function h(e){return s.isBuffer(e)||e instanceof u}var p=require("core-util-is");p.inherits=require("inherits");var f=require("util"),c=void 0;c=f&&f.debuglog?f.debuglog("stream"):function(){};var g,b=require("./internal/streams/BufferList"),m=require("./internal/streams/destroy");p.inherits(_,o);var v=["error","close","destroy","pause","resume"];function y(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?i(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function w(e,t){e=e||{};var n=t instanceof(r=r||require("./_stream_duplex"));this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,a=e.readableHighWaterMark,d=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(a||0===a)?a:d,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new b,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(g||(g=require("string_decoder/").StringDecoder),this.decoder=new g(e.encoding),this.encoding=e.encoding)}function _(e){if(r=r||require("./_stream_duplex"),!(this instanceof _))return new _(e);this._readableState=new w(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),o.call(this)}function M(e,t,n,r,i){var a,d=e._readableState;null===t?(d.reading=!1,x(e,d)):(i||(a=k(d,t)),a?e.emit("error",a):d.objectMode||t&&t.length>0?("string"==typeof t||d.objectMode||Object.getPrototypeOf(t)===s.prototype||(t=l(t)),r?d.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):S(e,d,t,!0):d.ended?e.emit("error",new Error("stream.push() after EOF")):(d.reading=!1,d.decoder&&!n?(t=d.decoder.write(t),d.objectMode||0!==t.length?S(e,d,t,!1):C(e,d)):S(e,d,t,!1))):r||(d.reading=!1));return j(d)}function S(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&q(e)),C(e,t)}function k(e,t){var n;return h(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function j(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),_.prototype.destroy=m.destroy,_.prototype._undestroy=m.undestroy,_.prototype._destroy=function(e,t){this.push(null),t(e)},_.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=s.from(e,t),t=""),n=!0),M(this,e,t,!1,n)},_.prototype.unshift=function(e){return M(this,e,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(e){return g||(g=require("string_decoder/").StringDecoder),this._readableState.decoder=new g(e),this._readableState.encoding=e,this};var R=8388608;function E(e){return e>=R?e=R:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function L(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=E(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function x(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,q(e)}}function q(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?n.nextTick(W,e):W(e))}function W(e){c("emit readable"),e.emit("readable"),B(e)}function C(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(D,e,t))}function D(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(c("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function O(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&d(e,"data")&&(t.flowing=!0,B(e))}}function T(e){c("readable nexttick read 0"),e.read(0)}function U(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(P,e,t))}function P(e,t){t.reading||(c("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),B(e),t.flowing&&!t.reading&&e.read(0)}function B(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function H(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=I(e,t.buffer,t.decoder),n);var n}function I(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?A(e,t):F(e,t),r}function A(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var a=n.data,d=e>a.length?a.length:e;if(d===a.length?i+=a:i+=a.slice(0,e),0===(e-=d)){d===a.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=a.slice(d));break}++r}return t.length-=r,i}function F(e,t){var n=s.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var a=r.data,d=e>a.length?a.length:e;if(a.copy(n,n.length-e,0,d),0===(e-=d)){d===a.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=a.slice(d));break}++i}return t.length-=i,n}function z(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,n.nextTick(G,t,e))}function G(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function J(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}_.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?z(this):q(this),null;if(0===(e=L(e,t))&&t.ended)return 0===t.length&&z(this),null;var r,i=t.needReadable;return c("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",i=!0),t.ended||t.reading?c("reading or ended",i=!1):i&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=L(n,t))),null===(r=e>0?H(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&z(this)),null!==r&&this.emit("data",r),r},_.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},_.prototype.pipe=function(e,r){var i=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e)}a.pipesCount+=1,c("pipe count=%d opts=%j",a.pipesCount,r);var o=(!r||!1!==r.end)&&e!==t.stdout&&e!==t.stderr?u:v;function s(t,n){c("onunpipe"),t===i&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,c("cleanup"),e.removeListener("close",b),e.removeListener("finish",m),e.removeListener("drain",l),e.removeListener("error",g),e.removeListener("unpipe",s),i.removeListener("end",u),i.removeListener("end",v),i.removeListener("data",f),h=!0,!a.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function u(){c("onend"),e.end()}a.endEmitted?n.nextTick(o):i.once("end",o),e.on("unpipe",s);var l=O(i);e.on("drain",l);var h=!1;var p=!1;function f(t){c("ondata"),p=!1,!1!==e.write(t)||p||((1===a.pipesCount&&a.pipes===e||a.pipesCount>1&&-1!==J(a.pipes,e))&&!h&&(c("false write response, pause",i._readableState.awaitDrain),i._readableState.awaitDrain++,p=!0),i.pause())}function g(t){c("onerror",t),v(),e.removeListener("error",g),0===d(e,"error")&&e.emit("error",t)}function b(){e.removeListener("finish",m),v()}function m(){c("onfinish"),e.removeListener("close",b),v()}function v(){c("unpipe"),i.unpipe(e)}return i.on("data",f),y(e,"error",g),e.once("close",b),e.once("finish",m),e.emit("pipe",i),a.flowing||(c("pipe resume"),i.resume()),e},_.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)r[a].emit("unpipe",this,n);return this}var d=J(t.pipes,e);return-1===d?this:(t.pipes.splice(d,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},_.prototype.on=function(e,t){var r=o.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&q(this):n.nextTick(T,this))}return r},_.prototype.addListener=_.prototype.on,_.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!0,U(this,e)),this},_.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this},_.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",function(){if(c("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){(c("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<v.length;a++)e.on(v[a],this.emit.bind(this,v[a]));return this._read=function(t){c("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),_._fromList=H;
},{"process-nextick-args":101,"isarray":109,"events":61,"./internal/streams/stream":106,"safe-buffer":84,"core-util-is":102,"inherits":64,"util":69,"./internal/streams/BufferList":107,"./internal/streams/destroy":108,"./_stream_duplex":72,"string_decoder/":110,"process":56}],73:[function(require,module,exports) {
"use strict";module.exports=n;var t=require("./_stream_duplex"),r=require("core-util-is");function e(t,r){var e=this._transformState;e.transforming=!1;var n=e.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));e.writechunk=null,e.writecb=null,null!=r&&this.push(r),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function n(r){if(!(this instanceof n))return new n(r);t.call(this,r),this._transformState={afterTransform:e.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,r&&("function"==typeof r.transform&&(this._transform=r.transform),"function"==typeof r.flush&&(this._flush=r.flush)),this.on("prefinish",i)}function i(){var t=this;"function"==typeof this._flush?this._flush(function(r,e){a(t,r,e)}):a(this,null,null)}function a(t,r,e){if(r)return t.emit("error",r);if(null!=e&&t.push(e),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}r.inherits=require("inherits"),r.inherits(n,t),n.prototype.push=function(r,e){return this._transformState.needTransform=!1,t.prototype.push.call(this,r,e)},n.prototype._transform=function(t,r,e){throw new Error("_transform() is not implemented")},n.prototype._write=function(t,r,e){var n=this._transformState;if(n.writecb=e,n.writechunk=t,n.writeencoding=r,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},n.prototype._read=function(t){var r=this._transformState;null!==r.writechunk&&r.writecb&&!r.transforming?(r.transforming=!0,this._transform(r.writechunk,r.writeencoding,r.afterTransform)):r.needTransform=!0},n.prototype._destroy=function(r,e){var n=this;t.prototype._destroy.call(this,r,function(t){e(t),n.emit("close")})};
},{"./_stream_duplex":72,"core-util-is":102,"inherits":64}],74:[function(require,module,exports) {
"use strict";module.exports=i;var r=require("./_stream_transform"),e=require("core-util-is");function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}e.inherits=require("inherits"),e.inherits(i,r),i.prototype._transform=function(r,e,i){i(null,r)};
},{"./_stream_transform":73,"core-util-is":102,"inherits":64}],58:[function(require,module,exports) {
exports=module.exports=require("./lib/_stream_readable.js"),exports.Stream=exports,exports.Readable=exports,exports.Writable=require("./lib/_stream_writable.js"),exports.Duplex=require("./lib/_stream_duplex.js"),exports.Transform=require("./lib/_stream_transform.js"),exports.PassThrough=require("./lib/_stream_passthrough.js");
},{"./lib/_stream_readable.js":70,"./lib/_stream_writable.js":71,"./lib/_stream_duplex.js":72,"./lib/_stream_transform.js":73,"./lib/_stream_passthrough.js":74}],75:[function(require,module,exports) {
"use strict";module.exports=function(){var e,t;if("function"!=typeof Map)return!1;try{e=new Map([["raz","one"],["dwa","two"],["trzy","three"]])}catch(e){return!1}return"[object Map]"===String(e)&&(3===e.size&&("function"==typeof e.clear&&("function"==typeof e.delete&&("function"==typeof e.entries&&("function"==typeof e.forEach&&("function"==typeof e.get&&("function"==typeof e.has&&("function"==typeof e.keys&&("function"==typeof e.set&&("function"==typeof e.values&&(!1===(t=e.entries().next()).done&&(!!t.value&&("raz"===t.value[0]&&"one"===t.value[1])))))))))))))};
},{}],153:[function(require,module,exports) {
"use strict";module.exports=function(){};
},{}],122:[function(require,module,exports) {
"use strict";var n=require("../function/noop")();module.exports=function(r){return r!==n&&null!==r};
},{"../function/noop":153}],90:[function(require,module,exports) {
"use strict";var e=require("./is-value");module.exports=function(r){if(!e(r))throw new TypeError("Cannot use null or undefined");return r};
},{"./is-value":122}],87:[function(require,module,exports) {
"use strict";var e=require("../../object/valid-value");module.exports=function(){return e(this).length=0,this};
},{"../../object/valid-value":90}],140:[function(require,module,exports) {
"use strict";module.exports=function(){var t=Number.isNaN;return"function"==typeof t&&(!t({})&&t(NaN)&&!t(34))};
},{}],141:[function(require,module,exports) {
"use strict";module.exports=function(t){return t!=t};
},{}],124:[function(require,module,exports) {
"use strict";module.exports=require("./is-implemented")()?Number.isNaN:require("./shim");
},{"./is-implemented":140,"./shim":141}],166:[function(require,module,exports) {
"use strict";module.exports=function(){var t=Math.sign;return"function"==typeof t&&(1===t(10)&&-1===t(-20))};
},{}],167:[function(require,module,exports) {
"use strict";module.exports=function(e){return e=Number(e),isNaN(e)||0===e?e:e>0?1:-1};
},{}],163:[function(require,module,exports) {
"use strict";module.exports=require("./is-implemented")()?Math.sign:require("./shim");
},{"./is-implemented":166,"./shim":167}],154:[function(require,module,exports) {
"use strict";var r=require("../math/sign"),t=Math.abs,e=Math.floor;module.exports=function(i){return isNaN(i)?0:0!==(i=Number(i))&&isFinite(i)?r(i)*e(t(i)):i};
},{"../math/sign":163}],123:[function(require,module,exports) {
"use strict";var e=require("./to-integer"),r=Math.max;module.exports=function(t){return r(0,e(t))};
},{"./to-integer":154}],88:[function(require,module,exports) {
"use strict";var r=require("../../number/is-nan"),e=require("../../number/to-pos-integer"),t=require("../../object/valid-value"),i=Array.prototype.indexOf,n=Object.prototype.hasOwnProperty,o=Math.abs,a=Math.floor;module.exports=function(s){var u,h,l,p;if(!r(s))return i.apply(this,arguments);for(h=e(t(this).length),l=arguments[1],u=l=isNaN(l)?0:l>=0?a(l):e(this.length)-a(o(l));u<h;++u)if(n.call(this,u)&&(p=this[u],r(p)))return u;return-1};
},{"../../number/is-nan":124,"../../number/to-pos-integer":123,"../../object/valid-value":90}],131:[function(require,module,exports) {
"use strict";var t=Object.create,e=Object.getPrototypeOf,o={};module.exports=function(){var r=Object.setPrototypeOf,c=arguments[0]||t;return"function"==typeof r&&e(r(c(null),o))===o};
},{}],160:[function(require,module,exports) {
"use strict";var e=require("./is-value"),t={function:!0,object:!0};module.exports=function(r){return e(r)&&t[typeof r]||!1};
},{"./is-value":122}],161:[function(require,module,exports) {
"use strict";var e,r=Object.create;require("./set-prototype-of/is-implemented")()||(e=require("./set-prototype-of/shim")),module.exports=function(){var t,o,l;return e?1!==e.level?r:(t={},o={},l={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(e){o[e]="__proto__"!==e?l:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(t,o),Object.defineProperty(e,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:t}),function(e,o){return r(null===e?t:e,o)}):r}();
},{"./set-prototype-of/is-implemented":131,"./set-prototype-of/shim":132}],132:[function(require,module,exports) {
"use strict";var e,t=require("../is-object"),r=require("../valid-value"),l=Object.prototype.isPrototypeOf,o=Object.defineProperty,n={configurable:!0,enumerable:!1,writable:!0,value:void 0};e=function(e,l){if(r(e),null===l||t(l))return e;throw new TypeError("Prototype must be null or an object")},module.exports=function(t){var r,u;return t?(2===t.level?t.set?(u=t.set,r=function(t,r){return u.call(e(t,r),r),t}):r=function(t,r){return e(t,r).__proto__=r,t}:r=function t(r,u){var c;return e(r,u),(c=l.call(t.nullPolyfill,r))&&delete t.nullPolyfill.__proto__,null===u&&(u=t.nullPolyfill),r.__proto__=u,c&&o(t.nullPolyfill,"__proto__",n),r},Object.defineProperty(r,"level",{configurable:!1,enumerable:!1,writable:!1,value:t.level})):null}(function(){var e,t=Object.create(null),r={},l=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(l){try{(e=l.set).call(t,r)}catch(e){}if(Object.getPrototypeOf(t)===r)return{set:e,level:2}}return t.__proto__=r,Object.getPrototypeOf(t)===r?{level:2}:((t={}).__proto__=r,Object.getPrototypeOf(t)===r&&{level:1})}()),require("../create");
},{"../is-object":160,"../valid-value":90,"../create":161}],100:[function(require,module,exports) {
"use strict";module.exports=require("./is-implemented")()?Object.setPrototypeOf:require("./shim");
},{"./is-implemented":131,"./shim":132}],89:[function(require,module,exports) {
"use strict";module.exports=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t};
},{}],136:[function(require,module,exports) {
"use strict";module.exports=function(){var r,t=Object.assign;return"function"==typeof t&&(t(r={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),r.foo+r.bar+r.trzy==="razdwatrzy")};
},{}],164:[function(require,module,exports) {
"use strict";module.exports=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}};
},{}],165:[function(require,module,exports) {
"use strict";var e=require("../is-value"),r=Object.keys;module.exports=function(t){return r(e(t)?Object(t):t)};
},{"../is-value":122}],162:[function(require,module,exports) {
"use strict";module.exports=require("./is-implemented")()?Object.keys:require("./shim");
},{"./is-implemented":164,"./shim":165}],137:[function(require,module,exports) {
"use strict";var r=require("../keys"),e=require("../valid-value"),t=Math.max;module.exports=function(a,i){var o,u,c,n=t(arguments.length,2);for(a=Object(e(a)),c=function(r){try{a[r]=i[r]}catch(r){o||(o=r)}},u=1;u<n;++u)i=arguments[u],r(i).forEach(c);if(void 0!==o)throw o;return a};
},{"../keys":162,"../valid-value":90}],116:[function(require,module,exports) {
"use strict";module.exports=require("./is-implemented")()?Object.assign:require("./shim");
},{"./is-implemented":136,"./shim":137}],112:[function(require,module,exports) {

"use strict";var r=require("./is-value"),e=Array.prototype.forEach,t=Object.create,c=function(r,e){var t;for(t in r)e[t]=r[t]};module.exports=function(n){var o=t(null);return e.call(arguments,function(e){r(e)&&c(Object(e),o)}),o};
},{"./is-value":122}],113:[function(require,module,exports) {
"use strict";module.exports=function(t){return"function"==typeof t};
},{}],158:[function(require,module,exports) {
"use strict";var n="razdwatrzy";module.exports=function(){return"function"==typeof n.contains&&(!0===n.contains("dwa")&&!1===n.contains("foo"))};
},{}],159:[function(require,module,exports) {
"use strict";var t=String.prototype.indexOf;module.exports=function(r){return t.call(this,r,arguments[1])>-1};
},{}],117:[function(require,module,exports) {
"use strict";module.exports=require("./is-implemented")()?String.prototype.contains:require("./shim");
},{"./is-implemented":158,"./shim":159}],91:[function(require,module,exports) {
"use strict";var e,l=require("es5-ext/object/assign"),r=require("es5-ext/object/normalize-options"),n=require("es5-ext/object/is-callable"),t=require("es5-ext/string/#/contains");(e=module.exports=function(e,n){var i,u,a,o,c;return arguments.length<2||"string"!=typeof e?(o=n,n=e,e=null):o=arguments[2],null==e?(i=a=!0,u=!1):(i=t.call(e,"c"),u=t.call(e,"e"),a=t.call(e,"w")),c={value:n,configurable:i,enumerable:u,writable:a},o?l(r(o),c):c}).gs=function(e,i,u){var a,o,c,s;return"string"!=typeof e?(c=u,u=i,i=e,e=null):c=arguments[3],null==i?i=void 0:n(i)?null==u?u=void 0:n(u)||(c=u,u=void 0):(c=i,i=u=void 0),null==e?(a=!0,o=!1):(a=t.call(e,"c"),o=t.call(e,"e")),s={get:i,set:u,configurable:a,enumerable:o},c?l(r(c),s):s};
},{"es5-ext/object/assign":116,"es5-ext/object/normalize-options":112,"es5-ext/object/is-callable":113,"es5-ext/string/#/contains":117}],92:[function(require,module,exports) {
"use strict";var e,t,r,l,i,n,c,s=require("d"),o=require("es5-ext/object/valid-callable"),_=Function.prototype.apply,a=Function.prototype.call,h=Object.create,u=Object.defineProperty,f=Object.defineProperties,p=Object.prototype.hasOwnProperty,b={configurable:!0,enumerable:!1,writable:!0};t=function(t,l){var i,n;return o(l),n=this,e.call(this,t,i=function(){r.call(n,t,i),_.call(l,this,arguments)}),i.__eeOnceListener__=l,this},i={on:e=function(e,t){var r;return o(t),p.call(this,"__ee__")?r=this.__ee__:(r=b.value=h(null),u(this,"__ee__",b),b.value=null),r[e]?"object"==typeof r[e]?r[e].push(t):r[e]=[r[e],t]:r[e]=t,this},once:t,off:r=function(e,t){var r,l,i,n;if(o(t),!p.call(this,"__ee__"))return this;if(!(r=this.__ee__)[e])return this;if("object"==typeof(l=r[e]))for(n=0;i=l[n];++n)i!==t&&i.__eeOnceListener__!==t||(2===l.length?r[e]=l[n?0:1]:l.splice(n,1));else l!==t&&l.__eeOnceListener__!==t||delete r[e];return this},emit:l=function(e){var t,r,l,i,n;if(p.call(this,"__ee__")&&(i=this.__ee__[e]))if("object"==typeof i){for(r=arguments.length,n=new Array(r-1),t=1;t<r;++t)n[t-1]=arguments[t];for(i=i.slice(),t=0;l=i[t];++t)_.call(l,this,n)}else switch(arguments.length){case 1:a.call(i,this);break;case 2:a.call(i,this,arguments[1]);break;case 3:a.call(i,this,arguments[1],arguments[2]);break;default:for(r=arguments.length,n=new Array(r-1),t=1;t<r;++t)n[t-1]=arguments[t];_.call(i,this,n)}}},n={on:s(e),once:s(t),off:s(r),emit:s(l)},c=f({},n),module.exports=exports=function(e){return null==e?h(c):f(Object(e),n)},exports.methods=i;
},{"d":91,"es5-ext/object/valid-callable":89}],114:[function(require,module,exports) {
"use strict";var t={object:!0,symbol:!0};module.exports=function(){var o;if("function"!=typeof Symbol)return!1;o=Symbol("test symbol");try{String(o)}catch(t){return!1}return!!t[typeof Symbol.iterator]&&(!!t[typeof Symbol.toPrimitive]&&!!t[typeof Symbol.toStringTag])};
},{}],144:[function(require,module,exports) {
"use strict";module.exports=function(o){return!!o&&("symbol"==typeof o||!!o.constructor&&("Symbol"===o.constructor.name&&"Symbol"===o[o.constructor.toStringTag]))};
},{}],133:[function(require,module,exports) {
"use strict";var r=require("./is-symbol");module.exports=function(e){if(!r(e))throw new TypeError(e+" is not a symbol");return e};
},{"./is-symbol":144}],115:[function(require,module,exports) {
"use strict";var t,r,e,o,i=require("d"),n=require("./validate-symbol"),a=Object.create,c=Object.defineProperties,s=Object.defineProperty,p=Object.prototype,u=a(null);if("function"==typeof Symbol){t=Symbol;try{String(t()),o=!0}catch(t){}}var l=function(){var t=a(null);return function(r){for(var e,o,n=0;t[r+(n||"")];)++n;return t[r+=n||""]=!0,s(p,e="@@"+r,i.gs(null,function(t){o||(o=!0,s(this,e,i(t)),o=!1)})),e}}();e=function(t){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return r(t)},module.exports=r=function r(n){var s;if(this instanceof r)throw new TypeError("Symbol is not a constructor");return o?t(n):(s=a(e.prototype),n=void 0===n?"":String(n),c(s,{__description__:i("",n),__name__:i("",l(n))}))},c(r,{for:i(function(t){return u[t]?u[t]:u[t]=r(String(t))}),keyFor:i(function(t){var r;for(r in n(t),u)if(u[r]===t)return r}),hasInstance:i("",t&&t.hasInstance||r("hasInstance")),isConcatSpreadable:i("",t&&t.isConcatSpreadable||r("isConcatSpreadable")),iterator:i("",t&&t.iterator||r("iterator")),match:i("",t&&t.match||r("match")),replace:i("",t&&t.replace||r("replace")),search:i("",t&&t.search||r("search")),species:i("",t&&t.species||r("species")),split:i("",t&&t.split||r("split")),toPrimitive:i("",t&&t.toPrimitive||r("toPrimitive")),toStringTag:i("",t&&t.toStringTag||r("toStringTag")),unscopables:i("",t&&t.unscopables||r("unscopables"))}),c(e.prototype,{constructor:i(r),toString:i("",function(){return this.__name__})}),c(r.prototype,{toString:i(function(){return"Symbol ("+n(this).__description__+")"}),valueOf:i(function(){return n(this)})}),s(r.prototype,r.toPrimitive,i("",function(){var t=n(this);return"symbol"==typeof t?t:t.toString()})),s(r.prototype,r.toStringTag,i("c","Symbol")),s(e.prototype,r.toStringTag,i("c",r.prototype[r.toStringTag])),s(e.prototype,r.toPrimitive,i("c",r.prototype[r.toPrimitive]));
},{"d":91,"./validate-symbol":133}],93:[function(require,module,exports) {
"use strict";module.exports=require("./is-implemented")()?Symbol:require("./polyfill");
},{"./is-implemented":114,"./polyfill":115}],126:[function(require,module,exports) {
"use strict";var t=Object.prototype.toString,r=t.call(function(){return arguments}());module.exports=function(e){return t.call(e)===r};
},{}],127:[function(require,module,exports) {
"use strict";var t=Object.prototype.toString,e=t.call("");module.exports=function(o){return"string"==typeof o||o&&"object"==typeof o&&(o instanceof String||t.call(o)===e)||!1};
},{}],118:[function(require,module,exports) {
"use strict";var e=require("es5-ext/function/is-arguments"),r=require("es5-ext/object/is-value"),t=require("es5-ext/string/is-string"),i=require("es6-symbol").iterator,s=Array.isArray;module.exports=function(u){return!!r(u)&&(!!s(u)||(!!t(u)||(!!e(u)||"function"==typeof u[i])))};
},{"es5-ext/function/is-arguments":126,"es5-ext/object/is-value":122,"es5-ext/string/is-string":127,"es6-symbol":93}],94:[function(require,module,exports) {
"use strict";var r=require("./is-iterable");module.exports=function(e){if(!r(e))throw new TypeError(e+" is not iterable");return e};
},{"./is-iterable":118}],150:[function(require,module,exports) {
"use strict";module.exports=function(){var r,o,t=Array.from;return"function"==typeof t&&(o=t(r=["raz","dwa"]),Boolean(o&&o!==r&&"dwa"===o[1]))};
},{}],152:[function(require,module,exports) {
"use strict";var t=Object.prototype.toString,o=t.call(require("./noop"));module.exports=function(e){return"function"==typeof e&&t.call(e)===o};
},{"./noop":153}],151:[function(require,module,exports) {
"use strict";var e=require("es6-symbol").iterator,r=require("../../function/is-arguments"),l=require("../../function/is-function"),i=require("../../number/to-pos-integer"),t=require("../../object/valid-callable"),n=require("../../object/valid-value"),u=require("../../object/is-value"),a=require("../../string/is-string"),o=Array.isArray,s=Function.prototype.call,c={configurable:!0,enumerable:!0,writable:!0,value:null},f=Object.defineProperty;module.exports=function(v){var b,g,h,y,d,q,p,A,w,j,m=arguments[1],x=arguments[2];if(v=Object(n(v)),u(m)&&t(m),this&&this!==Array&&l(this))b=this;else{if(!m){if(r(v))return 1!==(d=v.length)?Array.apply(null,v):((y=new Array(1))[0]=v[0],y);if(o(v)){for(y=new Array(d=v.length),g=0;g<d;++g)y[g]=v[g];return y}}y=[]}if(!o(v))if(void 0!==(w=v[e])){for(p=t(w).call(v),b&&(y=new b),A=p.next(),g=0;!A.done;)j=m?s.call(m,x,A.value,g):A.value,b?(c.value=j,f(y,g,c)):y[g]=j,A=p.next(),++g;d=g}else if(a(v)){for(d=v.length,b&&(y=new b),g=0,h=0;g<d;++g)j=v[g],g+1<d&&(q=j.charCodeAt(0))>=55296&&q<=56319&&(j+=v[++g]),j=m?s.call(m,x,j,h):j,b?(c.value=j,f(y,h,c)):y[h]=j,++h;d=h}if(void 0===d)for(d=i(v.length),b&&(y=new b(d)),g=0;g<d;++g)j=m?s.call(m,x,v[g],g):v[g],b?(c.value=j,f(y,g,c)):y[g]=j;return b&&(c.value=null,y.length=d),y};
},{"es6-symbol":93,"../../function/is-arguments":126,"../../function/is-function":152,"../../number/to-pos-integer":123,"../../object/valid-callable":89,"../../object/valid-value":90,"../../object/is-value":122,"../../string/is-string":127}],147:[function(require,module,exports) {
"use strict";module.exports=require("./is-implemented")()?Array.from:require("./shim");
},{"./is-implemented":150,"./shim":151}],145:[function(require,module,exports) {
"use strict";var r=require("../array/from"),e=require("./assign"),u=require("./valid-value");module.exports=function(i){var n=Object(u(i)),t=arguments[1],a=Object(arguments[2]);if(n!==i&&!t)return n;var s={};return t?r(t,function(r){(a.ensure||r in i)&&(s[r]=i[r])}):e(s,i),s};
},{"../array/from":147,"./assign":116,"./valid-value":90}],149:[function(require,module,exports) {
"use strict";var t=require("./valid-callable"),e=require("./valid-value"),r=Function.prototype.bind,o=Function.prototype.call,n=Object.keys,l=Object.prototype.propertyIsEnumerable;module.exports=function(c,u){return function(i,a){var p,f=arguments[2],y=arguments[3];return i=Object(e(i)),t(a),p=n(i),y&&p.sort("function"==typeof y?r.call(y,i):void 0),"function"!=typeof c&&(c=p[c]),o.call(c,p,function(t,e){return l.call(i,t)?o.call(a,f,i[t],t,i,e):u})}};
},{"./valid-callable":89,"./valid-value":90}],148:[function(require,module,exports) {
"use strict";module.exports=require("./_iterate")("forEach");
},{"./_iterate":149}],146:[function(require,module,exports) {
"use strict";var r=require("./valid-callable"),e=require("./for-each"),l=Function.prototype.call;module.exports=function(t,a){var c={},o=arguments[2];return r(a),e(t,function(r,e,t,u){c[e]=l.call(a,o,r,e,t,u)}),c};
},{"./valid-callable":89,"./for-each":148}],142:[function(require,module,exports) {

"use strict";var e,t=require("es5-ext/object/copy"),r=require("es5-ext/object/normalize-options"),o=require("es5-ext/object/valid-callable"),i=require("es5-ext/object/map"),l=require("es5-ext/object/valid-callable"),n=require("es5-ext/object/valid-value"),u=Function.prototype.bind,a=Object.defineProperty,s=Object.prototype.hasOwnProperty;e=function(e,r,o){var i,c=n(r)&&l(r.value);return delete(i=t(r)).writable,delete i.value,i.get=function(){return!o.overwriteDefinition&&s.call(this,e)?c:(r.value=u.call(c,o.resolveContext?o.resolveContext(this):this),a(this,e,r),this[e])},i},module.exports=function(t){var l=r(arguments[1]);return null!=l.resolveContext&&o(l.resolveContext),i(t,function(t,r){return e(r,t,l)})};
},{"es5-ext/object/copy":145,"es5-ext/object/normalize-options":112,"es5-ext/object/valid-callable":89,"es5-ext/object/map":146,"es5-ext/object/valid-value":90}],129:[function(require,module,exports) {
"use strict";var _,e=require("es5-ext/array/#/clear"),t=require("es5-ext/object/assign"),i=require("es5-ext/object/valid-callable"),n=require("es5-ext/object/valid-value"),o=require("d"),r=require("d/auto-bind"),s=require("es6-symbol"),d=Object.defineProperty,h=Object.defineProperties;module.exports=_=function(e,t){if(!(this instanceof _))throw new TypeError("Constructor requires 'new'");h(this,{__list__:o("w",n(e)),__context__:o("w",t),__nextIndex__:o("w",0)}),t&&(i(t.on),t.on("_add",this._onAdd),t.on("_delete",this._onDelete),t.on("_clear",this._onClear))},delete _.prototype.constructor,h(_.prototype,t({_next:o(function(){var _;if(this.__list__)return this.__redo__&&void 0!==(_=this.__redo__.shift())?_:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:o(function(){return this._createResult(this._next())}),_createResult:o(function(_){return void 0===_?{done:!0,value:void 0}:{done:!1,value:this._resolve(_)}}),_resolve:o(function(_){return this.__list__[_]}),_unBind:o(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:o(function(){return"[object "+(this[s.toStringTag]||"Object")+"]"})},r({_onAdd:o(function(_){_>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(e,t){e>=_&&(this.__redo__[t]=++e)},this),this.__redo__.push(_)):d(this,"__redo__",o("c",[_])))}),_onDelete:o(function(_){var e;_>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(e=this.__redo__.indexOf(_))&&this.__redo__.splice(e,1),this.__redo__.forEach(function(e,t){e>_&&(this.__redo__[t]=--e)},this)))}),_onClear:o(function(){this.__redo__&&e.call(this.__redo__),this.__nextIndex__=0})}))),d(_.prototype,s.iterator,o(function(){return this}));
},{"es5-ext/array/#/clear":87,"es5-ext/object/assign":116,"es5-ext/object/valid-callable":89,"es5-ext/object/valid-value":90,"d":91,"d/auto-bind":142,"es6-symbol":93}],138:[function(require,module,exports) {
"use strict";var e,t=require("es5-ext/object/set-prototype-of"),r=require("es5-ext/string/#/contains"),o=require("d"),i=require("es6-symbol"),s=require("./"),_=Object.defineProperty;e=module.exports=function(t,i){if(!(this instanceof e))throw new TypeError("Constructor requires 'new'");s.call(this,t),i=i?r.call(i,"key+value")?"key+value":r.call(i,"key")?"key":"value":"value",_(this,"__kind__",o("",i))},t&&t(e,s),delete e.prototype.constructor,e.prototype=Object.create(s.prototype,{_resolve:o(function(e){return"value"===this.__kind__?this.__list__[e]:"key+value"===this.__kind__?[e,this.__list__[e]]:e})}),_(e.prototype,i.toStringTag,o("c","Array Iterator"));
},{"es5-ext/object/set-prototype-of":100,"es5-ext/string/#/contains":117,"d":91,"es6-symbol":93,"./":129}],139:[function(require,module,exports) {
"use strict";var t,e=require("es5-ext/object/set-prototype-of"),_=require("d"),r=require("es6-symbol"),i=require("./"),n=Object.defineProperty;t=module.exports=function(e){if(!(this instanceof t))throw new TypeError("Constructor requires 'new'");e=String(e),i.call(this,e),n(this,"__length__",_("",e.length))},e&&e(t,i),delete t.prototype.constructor,t.prototype=Object.create(i.prototype,{_next:_(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:_(function(t){var e,_=this.__list__[t];return this.__nextIndex__===this.__length__?_:(e=_.charCodeAt(0))>=55296&&e<=56319?_+this.__list__[this.__nextIndex__++]:_})}),n(t.prototype,r.toStringTag,_("c","String Iterator"));
},{"es5-ext/object/set-prototype-of":100,"d":91,"es6-symbol":93,"./":129}],125:[function(require,module,exports) {
"use strict";var e=require("es5-ext/function/is-arguments"),r=require("es5-ext/string/is-string"),i=require("./array"),t=require("./string"),n=require("./valid-iterable"),s=require("es6-symbol").iterator;module.exports=function(u){return"function"==typeof n(u)[s]?u[s]():e(u)?new i(u):r(u)?new t(u):new i(u)};
},{"es5-ext/function/is-arguments":126,"es5-ext/string/is-string":127,"./array":138,"./string":139,"./valid-iterable":94,"es6-symbol":93}],95:[function(require,module,exports) {
"use strict";var e=require("es5-ext/function/is-arguments"),r=require("es5-ext/object/valid-callable"),t=require("es5-ext/string/is-string"),i=require("./get"),n=Array.isArray,a=Function.prototype.call,l=Array.prototype.some;module.exports=function(o,s){var u,c,f,g,y,x,p,d,q=arguments[2];if(n(o)||e(o)?u="array":t(o)?u="string":o=i(o),r(s),f=function(){g=!0},"array"!==u)if("string"!==u)for(c=o.next();!c.done;){if(a.call(s,q,c.value,f),g)return;c=o.next()}else for(x=o.length,y=0;y<x&&(p=o[y],y+1<x&&(d=p.charCodeAt(0))>=55296&&d<=56319&&(p+=o[++y]),a.call(s,q,p,f),!g);++y);else l.call(o,function(e){return a.call(s,q,e,f),g})};
},{"es5-ext/function/is-arguments":126,"es5-ext/object/valid-callable":89,"es5-ext/string/is-string":127,"./get":125}],143:[function(require,module,exports) {
"use strict";var r=Array.prototype.forEach,t=Object.create;module.exports=function(e){var c=t(null);return r.call(arguments,function(r){c[r]=!0}),c};
},{}],128:[function(require,module,exports) {
"use strict";module.exports=require("es5-ext/object/primitive-set")("key","value","key+value");
},{"es5-ext/object/primitive-set":143}],86:[function(require,module,exports) {
"use strict";var t,e=require("es5-ext/object/set-prototype-of"),_=require("d"),r=require("es6-iterator"),i=require("es6-symbol").toStringTag,o=require("./iterator-kinds"),s=Object.defineProperties,n=r.prototype._unBind;t=module.exports=function(e,i){if(!(this instanceof t))return new t(e,i);r.call(this,e.__mapKeysData__,e),i&&o[i]||(i="key+value"),s(this,{__kind__:_("",i),__values__:_("w",e.__mapValuesData__)})},e&&e(t,r),t.prototype=Object.create(r.prototype,{constructor:_(t),_resolve:_(function(t){return"value"===this.__kind__?this.__values__[t]:"key"===this.__kind__?this.__list__[t]:[this.__list__[t],this.__values__[t]]}),_unBind:_(function(){this.__values__=null,n.call(this)}),toString:_(function(){return"[object Map Iterator]"})}),Object.defineProperty(t.prototype,i,_("c","Map Iterator"));
},{"es5-ext/object/set-prototype-of":100,"d":91,"es6-iterator":129,"es6-symbol":93,"./iterator-kinds":128}],85:[function(require,module,exports) {
"use strict";module.exports="undefined"!=typeof Map&&"[object Map]"===Object.prototype.toString.call(new Map);
},{}],76:[function(require,module,exports) {
"use strict";var e,t=require("es5-ext/array/#/clear"),a=require("es5-ext/array/#/e-index-of"),r=require("es5-ext/object/set-prototype-of"),i=require("es5-ext/object/valid-callable"),s=require("es5-ext/object/valid-value"),_=require("d"),n=require("event-emitter"),o=require("es6-symbol"),u=require("es6-iterator/valid-iterable"),l=require("es6-iterator/for-of"),c=require("./lib/iterator"),p=require("./is-native-implemented"),h=Function.prototype.call,y=Object.defineProperties,f=Object.getPrototypeOf;module.exports=e=function(){var t,i,n,o=arguments[0];if(!(this instanceof e))throw new TypeError("Constructor requires 'new'");return n=p&&r&&Map!==e?r(new Map,f(this)):this,null!=o&&u(o),y(n,{__mapKeysData__:_("c",t=[]),__mapValuesData__:_("c",i=[])}),o?(l(o,function(e){var r=s(e)[0];e=e[1],-1===a.call(t,r)&&(t.push(r),i.push(e))},n),n):n},p&&(r&&r(e,Map),e.prototype=Object.create(Map.prototype,{constructor:_(e)})),n(y(e.prototype,{clear:_(function(){this.__mapKeysData__.length&&(t.call(this.__mapKeysData__),t.call(this.__mapValuesData__),this.emit("_clear"))}),delete:_(function(e){var t=a.call(this.__mapKeysData__,e);return-1!==t&&(this.__mapKeysData__.splice(t,1),this.__mapValuesData__.splice(t,1),this.emit("_delete",t,e),!0)}),entries:_(function(){return new c(this,"key+value")}),forEach:_(function(e){var t,a,r=arguments[1];for(i(e),a=(t=this.entries())._next();void 0!==a;)h.call(e,r,this.__mapValuesData__[a],this.__mapKeysData__[a],this),a=t._next()}),get:_(function(e){var t=a.call(this.__mapKeysData__,e);if(-1!==t)return this.__mapValuesData__[t]}),has:_(function(e){return-1!==a.call(this.__mapKeysData__,e)}),keys:_(function(){return new c(this,"key")}),set:_(function(e,t){var r,i=a.call(this.__mapKeysData__,e);return-1===i&&(i=this.__mapKeysData__.push(e)-1,r=!0),this.__mapValuesData__[i]=t,r&&this.emit("_add",i,e),this}),size:_.gs(function(){return this.__mapKeysData__.length}),values:_(function(){return new c(this,"value")}),toString:_(function(){return"[object Map]"})})),Object.defineProperty(e.prototype,o.iterator,_(function(){return this.entries()})),Object.defineProperty(e.prototype,o.toStringTag,_("c","Map"));
},{"es5-ext/array/#/clear":87,"es5-ext/array/#/e-index-of":88,"es5-ext/object/set-prototype-of":100,"es5-ext/object/valid-callable":89,"es5-ext/object/valid-value":90,"d":91,"event-emitter":92,"es6-symbol":93,"es6-iterator/valid-iterable":94,"es6-iterator/for-of":95,"./lib/iterator":86,"./is-native-implemented":85}],59:[function(require,module,exports) {
"use strict";module.exports=require("./is-implemented")()?Map:require("./polyfill");
},{"./is-implemented":75,"./polyfill":76}],48:[function(require,module,exports) {
var process = require("process");
var t=require("process"),e=require("xtend"),i=require("readable-stream").Readable,n={objectMode:!0},s={clean:!0},r=require("es6-map");function o(t){if(!(this instanceof o))return new o(t);this.options=t||{},this.options=e(s,t),this._inflights=new r}o.prototype.put=function(t,e){return this._inflights.set(t.messageId,t),e&&e(),this},o.prototype.createStream=function(){var e=new i(n),s=!1,r=[],o=0;return this._inflights.forEach(function(t,e){r.push(t)}),e._read=function(){!s&&o<r.length?this.push(r[o++]):this.push(null)},e.destroy=function(){if(!s){var e=this;s=!0,t.nextTick(function(){e.emit("close")})}},e},o.prototype.del=function(t,e){return(t=this._inflights.get(t.messageId))?(this._inflights.delete(t.messageId),e(null,t)):e&&e(new Error("missing packet")),this},o.prototype.get=function(t,e){return(t=this._inflights.get(t.messageId))?e(null,t):e&&e(new Error("missing packet")),this},o.prototype.close=function(t){this.options.clean&&(this._inflights=null),t&&t()},module.exports=o;
},{"xtend":57,"readable-stream":58,"es6-map":59,"process":56}],96:[function(require,module,exports) {
function n(e,r){if(e&&r)return n(e)(r);if("function"!=typeof e)throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(n){t[n]=e[n]}),t;function t(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];var t=e.apply(this,n),o=n[n.length-1];return"function"==typeof t&&t!==o&&Object.keys(o).forEach(function(n){t[n]=o[n]}),t}}module.exports=n;
},{}],77:[function(require,module,exports) {
var e=require("wrappy");function r(e){var r=function(){return r.called?r.value:(r.called=!0,r.value=e.apply(this,arguments))};return r.called=!1,r}function n(e){var r=function(){if(r.called)throw new Error(r.onceError);return r.called=!0,r.value=e.apply(this,arguments)},n=e.name||"Function wrapped with `once`";return r.onceError=n+" shouldn't be called more than once",r.called=!1,r}module.exports=e(r),module.exports.strict=e(n),r.proto=r(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return r(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return n(this)},configurable:!0})});
},{"wrappy":96}],62:[function(require,module,exports) {
var e=require("once"),r=function(){},n=function(e){return e.setHeader&&"function"==typeof e.abort},o=function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length},t=function(i,l,a){if("function"==typeof l)return t(i,null,l);l||(l={}),a=e(a||r);var c=i._writableState,s=i._readableState,u=l.readable||!1!==l.readable&&i.readable,f=l.writable||!1!==l.writable&&i.writable,d=function(){i.writable||m()},m=function(){f=!1,u||a.call(i)},v=function(){u=!1,f||a.call(i)},b=function(e){a.call(i,e?new Error("exited with error code: "+e):null)},L=function(e){a.call(i,e)},w=function(){return(!u||s&&s.ended)&&(!f||c&&c.ended)?void 0:a.call(i,new Error("premature close"))},q=function(){i.req.on("finish",m)};return n(i)?(i.on("complete",m),i.on("abort",w),i.req?q():i.on("request",q)):f&&!c&&(i.on("end",d),i.on("close",d)),o(i)&&i.on("exit",b),i.on("end",v),i.on("finish",m),!1!==l.error&&i.on("error",L),i.on("close",w),function(){i.removeListener("complete",m),i.removeListener("abort",w),i.removeListener("request",q),i.req&&i.req.removeListener("finish",m),i.removeListener("end",d),i.removeListener("close",d),i.removeListener("finish",m),i.removeListener("exit",b),i.removeListener("end",v),i.removeListener("error",L),i.removeListener("close",w)}};module.exports=t;
},{"once":77}],120:[function(require,module,exports) {
module.exports=require("./lib/_stream_duplex.js");
},{"./lib/_stream_duplex.js":72}],134:[function(require,module,exports) {
module.exports=function(o){return o&&"object"==typeof o&&"function"==typeof o.copy&&"function"==typeof o.fill&&"function"==typeof o.readUInt8};
},{}],121:[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var e=arguments[3],t=require("process"),r=/%[sdj%]/g;exports.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}n=1;for(var o=arguments,s=o.length,u=String(e).replace(r,function(e){if("%%"===e)return"%";if(n>=s)return e;switch(e){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return JSON.stringify(o[n++])}catch(e){return"[Circular]"}default:return e}}),c=o[n];n<s;c=o[++n])h(c)||!z(c)?u+=" "+c:u+=" "+i(c);return u},exports.deprecate=function(r,n){if(j(e.process))return function(){return exports.deprecate(r,n).apply(this,arguments)};if(!0===t.noDeprecation)return r;var o=!1;return function(){if(!o){if(t.throwDeprecation)throw new Error(n);t.traceDeprecation?console.trace(n):console.error(n),o=!0}return r.apply(this,arguments)}};var n,o={};function i(e,t){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),x(t)?r.showHidden=t:t&&exports._extend(r,t),j(r.showHidden)&&(r.showHidden=!1),j(r.depth)&&(r.depth=2),j(r.colors)&&(r.colors=!1),j(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=s),p(r,e,r.depth)}function s(e,t){var r=i.styles[t];return r?"["+i.colors[r][0]+"m"+e+"["+i.colors[r][1]+"m":e}function u(e,t){return e}function c(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function p(e,t,r){if(e.customInspect&&t&&D(t.inspect)&&t.inspect!==exports.inspect&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(r,e);return v(n)||(n=p(e,n,r)),n}var o=l(e,t);if(o)return o;var i=Object.keys(t),s=c(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(t)),E(t)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return a(t);if(0===i.length){if(D(t)){var u=t.name?": "+t.name:"";return e.stylize("[Function"+u+"]","special")}if(O(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(w(t))return e.stylize(Date.prototype.toString.call(t),"date");if(E(t))return a(t)}var x,h="",b=!1,m=["{","}"];(d(t)&&(b=!0,m=["[","]"]),D(t))&&(h=" [Function"+(t.name?": "+t.name:"")+"]");return O(t)&&(h=" "+RegExp.prototype.toString.call(t)),w(t)&&(h=" "+Date.prototype.toUTCString.call(t)),E(t)&&(h=" "+a(t)),0!==i.length||b&&0!=t.length?r<0?O(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),x=b?f(e,t,r,s,i):i.map(function(n){return g(e,t,r,s,n,b)}),e.seen.pop(),y(x,h,m)):m[0]+h+m[1]}function l(e,t){if(j(t))return e.stylize("undefined","undefined");if(v(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return m(t)?e.stylize(""+t,"number"):x(t)?e.stylize(""+t,"boolean"):h(t)?e.stylize("null","null"):void 0}function a(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,r,n,o){for(var i=[],s=0,u=t.length;s<u;++s)$(t,String(s))?i.push(g(e,t,r,n,String(s),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(g(e,t,r,n,o,!0))}),i}function g(e,t,r,n,o,i){var s,u,c;if((c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?u=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(u=e.stylize("[Setter]","special")),$(n,o)||(s="["+o+"]"),u||(e.seen.indexOf(c.value)<0?(u=h(r)?p(e,c.value,null):p(e,c.value,r-1)).indexOf("\n")>-1&&(u=i?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n")):u=e.stylize("[Circular]","special")),j(s)){if(i&&o.match(/^\d+$/))return u;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+u}function y(e,t,r){return e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function d(e){return Array.isArray(e)}function x(e){return"boolean"==typeof e}function h(e){return null===e}function b(e){return null==e}function m(e){return"number"==typeof e}function v(e){return"string"==typeof e}function S(e){return"symbol"==typeof e}function j(e){return void 0===e}function O(e){return z(e)&&"[object RegExp]"===A(e)}function z(e){return"object"==typeof e&&null!==e}function w(e){return z(e)&&"[object Date]"===A(e)}function E(e){return z(e)&&("[object Error]"===A(e)||e instanceof Error)}function D(e){return"function"==typeof e}function N(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function A(e){return Object.prototype.toString.call(e)}function J(e){return e<10?"0"+e.toString(10):e.toString(10)}exports.debuglog=function(e){if(j(n)&&(n=""),e=e.toUpperCase(),!o[e])if(new RegExp("\\b"+e+"\\b","i").test(n)){var r=t.pid;o[e]=function(){var t=exports.format.apply(exports,arguments);console.error("%s %d: %s",e,r,t)}}else o[e]=function(){};return o[e]},exports.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},exports.isArray=d,exports.isBoolean=x,exports.isNull=h,exports.isNullOrUndefined=b,exports.isNumber=m,exports.isString=v,exports.isSymbol=S,exports.isUndefined=j,exports.isRegExp=O,exports.isObject=z,exports.isDate=w,exports.isError=E,exports.isFunction=D,exports.isPrimitive=N,exports.isBuffer=require("./support/isBuffer");var R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function H(){var e=new Date,t=[J(e.getHours()),J(e.getMinutes()),J(e.getSeconds())].join(":");return[e.getDate(),R[e.getMonth()],t].join(" ")}function $(e,t){return Object.prototype.hasOwnProperty.call(e,t)}exports.log=function(){console.log("%s - %s",H(),exports.format.apply(exports,arguments))},exports.inherits=require("inherits"),exports._extend=function(e,t){if(!t||!z(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};
},{"./support/isBuffer":134,"inherits":64,"process":56}],99:[function(require,module,exports) {

var t=require("readable-stream/duplex"),e=require("util"),n=require("safe-buffer").Buffer;function i(e){if(!(this instanceof i))return new i(e);if(this._bufs=[],this.length=0,"function"==typeof e){this._callback=e;var n=function(t){this._callback&&(this._callback(t),this._callback=null)}.bind(this);this.on("pipe",function(t){t.on("error",n)}),this.on("unpipe",function(t){t.removeListener("error",n)})}else this.append(e);t.call(this)}e.inherits(i,t),i.prototype._offset=function(t){var e,n=0,i=0;if(0===t)return[0,0];for(;i<this._bufs.length;i++){if(t<(e=n+this._bufs[i].length)||i==this._bufs.length-1)return[i,t-n];n=e}},i.prototype.append=function(t){var e=0;if(n.isBuffer(t))this._appendBuffer(t);else if(Array.isArray(t))for(;e<t.length;e++)this.append(t[e]);else if(t instanceof i)for(;e<t._bufs.length;e++)this.append(t._bufs[e]);else null!=t&&("number"==typeof t&&(t=t.toString()),this._appendBuffer(n.from(t)));return this},i.prototype._appendBuffer=function(t){this._bufs.push(t),this.length+=t.length},i.prototype._write=function(t,e,n){this._appendBuffer(t),"function"==typeof n&&n()},i.prototype._read=function(t){if(!this.length)return this.push(null);t=Math.min(t,this.length),this.push(this.slice(0,t)),this.consume(t)},i.prototype.end=function(e){t.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},i.prototype.get=function(t){return this.slice(t,t+1)[0]},i.prototype.slice=function(t,e){return"number"==typeof t&&t<0&&(t+=this.length),"number"==typeof e&&e<0&&(e+=this.length),this.copy(null,0,t,e)},i.prototype.copy=function(t,e,i,s){if(("number"!=typeof i||i<0)&&(i=0),("number"!=typeof s||s>this.length)&&(s=this.length),i>=this.length)return t||n.alloc(0);if(s<=0)return t||n.alloc(0);var r,h,f=!!t,o=this._offset(i),u=s-i,l=u,p=f&&e||0,a=o[1];if(0===i&&s==this.length){if(!f)return 1===this._bufs.length?this._bufs[0]:n.concat(this._bufs,this.length);for(h=0;h<this._bufs.length;h++)this._bufs[h].copy(t,p),p+=this._bufs[h].length;return t}if(l<=this._bufs[o[0]].length-a)return f?this._bufs[o[0]].copy(t,e,a,a+l):this._bufs[o[0]].slice(a,a+l);for(f||(t=n.allocUnsafe(u)),h=o[0];h<this._bufs.length;h++){if(!(l>(r=this._bufs[h].length-a))){this._bufs[h].copy(t,p,a,a+l);break}this._bufs[h].copy(t,p,a),p+=r,l-=r,a&&(a=0)}return t},i.prototype.shallowSlice=function(t,e){t=t||0,e=e||this.length,t<0&&(t+=this.length),e<0&&(e+=this.length);var n=this._offset(t),s=this._offset(e),r=this._bufs.slice(n[0],s[0]+1);return 0==s[1]?r.pop():r[r.length-1]=r[r.length-1].slice(0,s[1]),0!=n[1]&&(r[0]=r[0].slice(n[1])),new i(r)},i.prototype.toString=function(t,e,n){return this.slice(e,n).toString(t)},i.prototype.consume=function(t){for(;this._bufs.length;){if(!(t>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(t),this.length-=t;break}t-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},i.prototype.duplicate=function(){for(var t=0,e=new i;t<this._bufs.length;t++)e.append(this._bufs[t]);return e},i.prototype.destroy=function(){this._bufs.length=0,this.length=0,this.push(null)},function(){var t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1};for(var e in t)!function(e){i.prototype[e]=function(n){return this.slice(n,n+t[e])[e](0)}}(e)}(),module.exports=i;
},{"readable-stream/duplex":120,"util":121,"safe-buffer":84}],97:[function(require,module,exports) {
function t(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}module.exports=t;
},{}],98:[function(require,module,exports) {

"use strict";var S=require("safe-buffer").Buffer,e=module.exports;for(var r in e.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"reserved"},e.codes={},e.types){var c=e.types[r];e.codes[c]=r}function n(r){return[0,1,2].map(function(c){return[0,1].map(function(n){return[0,1].map(function(u){var s=new S(1);return s.writeUInt8(e.codes[r]<<e.CMD_SHIFT|(n?e.DUP_MASK:0)|c<<e.QOS_SHIFT|u,0,!0),s})})})}e.CMD_SHIFT=4,e.CMD_MASK=240,e.DUP_MASK=8,e.QOS_MASK=3,e.QOS_SHIFT=1,e.RETAIN_MASK=1,e.LENGTH_MASK=127,e.LENGTH_FIN_MASK=128,e.SESSIONPRESENT_MASK=1,e.SESSIONPRESENT_HEADER=S.from([e.SESSIONPRESENT_MASK]),e.CONNACK_HEADER=S.from([e.codes.connack<<e.CMD_SHIFT]),e.USERNAME_MASK=128,e.PASSWORD_MASK=64,e.WILL_RETAIN_MASK=32,e.WILL_QOS_MASK=24,e.WILL_QOS_SHIFT=3,e.WILL_FLAG_MASK=4,e.CLEAN_SESSION_MASK=2,e.CONNECT_HEADER=S.from([e.codes.connect<<e.CMD_SHIFT]),e.PUBLISH_HEADER=n("publish"),e.SUBSCRIBE_HEADER=n("subscribe"),e.UNSUBSCRIBE_HEADER=n("unsubscribe"),e.ACKS={unsuback:n("unsuback"),puback:n("puback"),pubcomp:n("pubcomp"),pubrel:n("pubrel"),pubrec:n("pubrec")},e.SUBACK_HEADER=S.from([e.codes.suback<<e.CMD_SHIFT]),e.VERSION3=S.from([3]),e.VERSION4=S.from([4]),e.QOS=[0,1,2].map(function(e){return S.from([e])}),e.EMPTY={pingreq:S.from([e.codes.pingreq<<4,0]),pingresp:S.from([e.codes.pingresp<<4,0]),disconnect:S.from([e.codes.disconnect<<4,0])};
},{"safe-buffer":84}],79:[function(require,module,exports) {
"use strict";var t=require("bl"),s=require("inherits"),r=require("events").EventEmitter,e=require("./packet"),i=require("./constants");function n(){if(!(this instanceof n))return new n;this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState()}s(n,r),n.prototype._resetState=function(){this.packet=new e,this.error=null,this._list=t(),this._stateCounter=0},n.prototype.parse=function(t){for(this.error&&this._resetState(),this._list.append(t);(-1!==this.packet.length||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,this._stateCounter>=this._states.length&&(this._stateCounter=0);return this._list.length},n.prototype._parseHeader=function(){var t=this._list.readUInt8(0);return this.packet.cmd=i.types[t>>i.CMD_SHIFT],this.packet.retain=0!=(t&i.RETAIN_MASK),this.packet.qos=t>>i.QOS_SHIFT&i.QOS_MASK,this.packet.dup=0!=(t&i.DUP_MASK),this._list.consume(1),!0},n.prototype._parseLength=function(){for(var t,s=0,r=1,e=0,n=!0;s<5&&(e+=r*((t=this._list.readUInt8(s++))&i.LENGTH_MASK),r*=128,0!=(t&i.LENGTH_FIN_MASK));)if(this._list.length<=s){n=!1;break}return n&&(this.packet.length=e,this._list.consume(s)),n},n.prototype._parsePayload=function(){var t=!1;if(0===this.packet.length||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseMessageId();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":case"disconnect":break;default:this._emitError(new Error("Not supported"))}t=!0}return t},n.prototype._parseConnect=function(){var t,s,r,e,n,o,a={},p=this.packet;if(null===(t=this._parseString()))return this._emitError(new Error("Cannot parse protocolId"));if("MQTT"!==t&&"MQIsdp"!==t)return this._emitError(new Error("Invalid protocolId"));if(p.protocolId=t,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(p.protocolVersion=this._list.readUInt8(this._pos),3!==p.protocolVersion&&4!==p.protocolVersion)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(a.username=this._list.readUInt8(this._pos)&i.USERNAME_MASK,a.password=this._list.readUInt8(this._pos)&i.PASSWORD_MASK,a.will=this._list.readUInt8(this._pos)&i.WILL_FLAG_MASK,a.will&&(p.will={},p.will.retain=0!=(this._list.readUInt8(this._pos)&i.WILL_RETAIN_MASK),p.will.qos=(this._list.readUInt8(this._pos)&i.WILL_QOS_MASK)>>i.WILL_QOS_SHIFT),p.clean=0!=(this._list.readUInt8(this._pos)&i.CLEAN_SESSION_MASK),this._pos++,p.keepalive=this._parseNum(),-1===p.keepalive)return this._emitError(new Error("Packet too short"));if(null===(s=this._parseString()))return this._emitError(new Error("Packet too short"));if(p.clientId=s,a.will){if(null===(r=this._parseString()))return this._emitError(new Error("Cannot parse will topic"));if(p.will.topic=r,null===(e=this._parseBuffer()))return this._emitError(new Error("Cannot parse will payload"));p.will.payload=e}if(a.username){if(null===(o=this._parseString()))return this._emitError(new Error("Cannot parse username"));p.username=o}if(a.password){if(null===(n=this._parseBuffer()))return this._emitError(new Error("Cannot parse password"));p.password=n}return p},n.prototype._parseConnack=function(){var t=this.packet;return this._list.length<2?null:(t.sessionPresent=!!(this._list.readUInt8(this._pos++)&i.SESSIONPRESENT_MASK),t.returnCode=this._list.readUInt8(this._pos),-1===t.returnCode?this._emitError(new Error("Cannot parse return code")):void 0)},n.prototype._parsePublish=function(){var t=this.packet;if(t.topic=this._parseString(),null===t.topic)return this._emitError(new Error("Cannot parse topic"));t.qos>0&&!this._parseMessageId()||(t.payload=this._list.slice(this._pos,t.length))},n.prototype._parseSubscribe=function(){var t,s,r=this.packet;if(1!==r.qos)return this._emitError(new Error("Wrong subscribe header"));if(r.subscriptions=[],this._parseMessageId())for(;this._pos<r.length;){if(null===(t=this._parseString()))return this._emitError(new Error("Cannot parse topic"));s=this._list.readUInt8(this._pos++),r.subscriptions.push({topic:t,qos:s})}},n.prototype._parseSuback=function(){if(this.packet.granted=[],this._parseMessageId())for(;this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))},n.prototype._parseUnsubscribe=function(){var t=this.packet;if(t.unsubscriptions=[],this._parseMessageId())for(;this._pos<t.length;){var s;if(null===(s=this._parseString()))return this._emitError(new Error("Cannot parse topic"));t.unsubscriptions.push(s)}},n.prototype._parseUnsuback=function(){if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"))},n.prototype._parseMessageId=function(){var t=this.packet;return t.messageId=this._parseNum(),null!==t.messageId||(this._emitError(new Error("Cannot parse messageId")),!1)},n.prototype._parseString=function(t){var s,r=this._parseNum(),e=r+this._pos;return-1===r||e>this._list.length||e>this.packet.length?null:(s=this._list.toString("utf8",this._pos,e),this._pos+=r,s)},n.prototype._parseBuffer=function(){var t,s=this._parseNum(),r=s+this._pos;return-1===s||r>this._list.length||r>this.packet.length?null:(t=this._list.slice(this._pos,r),this._pos+=s,t)},n.prototype._parseNum=function(){if(this._list.length-this._pos<2)return-1;var t=this._list.readUInt16BE(this._pos);return this._pos+=2,t},n.prototype._newPacket=function(){return this.packet&&(this._list.consume(this.packet.length),this.emit("packet",this.packet)),this.packet=new e,!0},n.prototype._emitError=function(t){this.error=t,this.emit("error",t)},module.exports=n;
},{"bl":99,"inherits":64,"events":61,"./packet":97,"./constants":98}],105:[function(require,module,exports) {

"use strict";var e=require("safe-buffer").Buffer,r=65536,t={};function a(r){var t=e.allocUnsafe(2);return t.writeUInt8(r>>8,0),t.writeUInt8(255&r,1),t}function n(){for(var e=0;e<r;e++)t[e]=a(e)}module.exports={cache:t,generateCache:n,generateNumber:a};
},{"safe-buffer":84}],81:[function(require,module,exports) {

"use strict";var r=require("./constants"),e=require("safe-buffer").Buffer,n=e.allocUnsafe(0),t=e.from([0]),i=require("./numbers"),o=require("process-nextick-args").nextTick,u=i.cache,s=i.generateNumber,a=i.generateCache,c=L,f=!0;function l(r,e){switch(e.cork&&(e.cork(),o(p,e)),f&&(f=!1,a()),r.cmd){case"connect":return d(r,e);case"connack":return m(r,e);case"publish":return w(r,e);case"puback":case"pubrec":case"pubrel":case"pubcomp":case"unsuback":return E(r,e);case"subscribe":return g(r,e);case"suback":return v(r,e);case"unsubscribe":return b(r,e);case"pingreq":case"pingresp":case"disconnect":return I(r,e);default:return e.emit("error",new Error("Unknown command")),!1}}function p(r){r.uncork()}function d(n,t){var i=n||{},o=i.protocolId||"MQTT",u=i.protocolVersion||4,s=i.will,a=i.clean,f=i.keepalive||0,l=i.clientId||"",p=i.username,d=i.password;void 0===a&&(a=!0);var m=0;if(!o||"string"!=typeof o&&!e.isBuffer(o))return t.emit("error",new Error("Invalid protocolId")),!1;if(m+=o.length+2,3!==u&&4!==u)return t.emit("error",new Error("Invalid protocol version")),!1;if(m+=1,"string"!=typeof l&&!e.isBuffer(l)||!l&&4!==u||!l&&!a){if(u<4)return t.emit("error",new Error("clientId must be supplied before 3.1.1")),!1;if(1*a==0)return t.emit("error",new Error("clientId must be given if cleanSession set to 0")),!1}else m+=l.length+2;if("number"!=typeof f||f<0||f>65535||f%1!=0)return t.emit("error",new Error("Invalid keepalive")),!1;if(m+=2,m+=1,s){if("object"!=typeof s)return t.emit("error",new Error("Invalid will")),!1;if(!s.topic||"string"!=typeof s.topic)return t.emit("error",new Error("Invalid will topic")),!1;if(m+=e.byteLength(s.topic)+2,s.payload&&s.payload){if(!(s.payload.length>=0))return t.emit("error",new Error("Invalid will payload")),!1;"string"==typeof s.payload?m+=e.byteLength(s.payload)+2:m+=s.payload.length+2}else m+=2}var w=!1;if(null!=p){if(!q(p))return t.emit("error",new Error("Invalid username")),!1;w=!0,m+=e.byteLength(p)+2}if(null!=d){if(!w)return t.emit("error",new Error("Username is required to use password")),!1;if(!q(d))return t.emit("error",new Error("Invalid password")),!1;m+=k(d)+2}t.write(r.CONNECT_HEADER),A(t,m),R(t,o),t.write(4===u?r.VERSION4:r.VERSION3);var E=0;return E|=null!=p?r.USERNAME_MASK:0,E|=null!=d?r.PASSWORD_MASK:0,E|=s&&s.retain?r.WILL_RETAIN_MASK:0,E|=s&&s.qos?s.qos<<r.WILL_QOS_SHIFT:0,E|=s?r.WILL_FLAG_MASK:0,E|=a?r.CLEAN_SESSION_MASK:0,t.write(e.from([E])),c(t,f),R(t,l),s&&(_(t,s.topic),R(t,s.payload)),null!=p&&R(t,p),null!=d&&R(t,d),!0}function m(n,i){var o=(n||{}).returnCode;return"number"!=typeof o?(i.emit("error",new Error("Invalid return code")),!1):(i.write(r.CONNACK_HEADER),A(i,2),i.write(n.sessionPresent?r.SESSIONPRESENT_HEADER:t),i.write(e.from([o])))}function w(t,i){var o=t||{},u=o.qos||0,s=o.retain?r.RETAIN_MASK:0,a=o.topic,f=o.payload||n,l=o.messageId,p=0;if("string"==typeof a)p+=e.byteLength(a)+2;else{if(!e.isBuffer(a))return i.emit("error",new Error("Invalid topic")),!1;p+=a.length+2}return e.isBuffer(f)?p+=f.length:p+=e.byteLength(f),u&&"number"!=typeof l?(i.emit("error",new Error("Invalid messageId")),!1):(u&&(p+=2),i.write(r.PUBLISH_HEADER[u][t.dup?1:0][s?1:0]),A(i,p),c(i,k(a)),i.write(a),u>0&&c(i,l),i.write(f))}function E(e,n){var t=e||{},i=t.cmd||"puback",o=t.messageId,u=t.dup&&"pubrel"===i?r.DUP_MASK:0,s=0;return"pubrel"===i&&(s=1),"number"!=typeof o?(n.emit("error",new Error("Invalid messageId")),!1):(n.write(r.ACKS[i][s][u][0]),A(n,2),c(n,o))}function g(n,t){var i=n||{},o=i.dup?r.DUP_MASK:0,u=i.messageId,s=i.subscriptions,a=0;if("number"!=typeof u)return t.emit("error",new Error("Invalid messageId")),!1;if(a+=2,"object"!=typeof s||!s.length)return t.emit("error",new Error("Invalid subscriptions")),!1;for(var f=0;f<s.length;f+=1){var l=s[f].topic,p=s[f].qos;if("string"!=typeof l)return t.emit("error",new Error("Invalid subscriptions - invalid topic")),!1;if("number"!=typeof p)return t.emit("error",new Error("Invalid subscriptions - invalid qos")),!1;a+=e.byteLength(l)+2+1}t.write(r.SUBSCRIBE_HEADER[1][o?1:0][0]),A(t,a),c(t,u);for(var d=!0,m=0;m<s.length;m++){var w=s[m],E=w.topic,g=w.qos;_(t,E),d=t.write(r.QOS[g])}return d}function v(n,t){var i=n||{},o=i.messageId,u=i.granted,s=0;if("number"!=typeof o)return t.emit("error",new Error("Invalid messageId")),!1;if(s+=2,"object"!=typeof u||!u.length)return t.emit("error",new Error("Invalid qos vector")),!1;for(var a=0;a<u.length;a+=1){if("number"!=typeof u[a])return t.emit("error",new Error("Invalid qos vector")),!1;s+=1}return t.write(r.SUBACK_HEADER),A(t,s),c(t,o),t.write(e.from(u))}function b(n,t){var i=n||{},o=i.messageId,u=i.dup?r.DUP_MASK:0,s=i.unsubscriptions,a=0;if("number"!=typeof o)return t.emit("error",new Error("Invalid messageId")),!1;if(a+=2,"object"!=typeof s||!s.length)return t.emit("error",new Error("Invalid unsubscriptions")),!1;for(var f=0;f<s.length;f+=1){if("string"!=typeof s[f])return t.emit("error",new Error("Invalid unsubscriptions")),!1;a+=e.byteLength(s[f])+2}t.write(r.UNSUBSCRIBE_HEADER[1][u?1:0][0]),A(t,a),c(t,o);for(var l=!0,p=0;p<s.length;p++)l=_(t,s[p]);return l}function I(e,n){return n.write(r.EMPTY[e.cmd])}function y(r){return r>=0&&r<128?1:r>=128&&r<16384?2:r>=16384&&r<2097152?3:r>=2097152&&r<268435456?4:0}function h(r){var n=0,t=0,i=e.allocUnsafe(y(r));do{n=r%128|0,(r=r/128|0)>0&&(n|=128),i.writeUInt8(n,t++)}while(r>0);return i}Object.defineProperty(l,"cacheNumbers",{get:function(){return c===L},set:function(r){r?(u&&0!==Object.keys(u).length||(f=!0),c=L):(f=!1,c=N)}});var S={};function A(r,e){var n=S[e];n||(n=h(e),e<16384&&(S[e]=n)),r.write(n)}function _(r,n){var t=e.byteLength(n);c(r,t),r.write(n,"utf8")}function L(r,e){return r.write(u[e])}function N(r,e){return r.write(s(e))}function R(r,e){"string"==typeof e?_(r,e):e?(c(r,e.length),r.write(e)):c(r,0)}function k(r){return r?r instanceof e?r.length:e.byteLength(r):0}function q(r){return"string"==typeof r||r instanceof e}module.exports=l;
},{"./constants":98,"safe-buffer":84,"./numbers":105,"process-nextick-args":101}],80:[function(require,module,exports) {

"use strict";var r=require("safe-buffer").Buffer,t=require("./writeToStream"),e=require("events").EventEmitter,i=require("inherits");function n(r){var e=new o;return t(r,e),e.concat()}function o(){this._array=new Array(20),this._i=0}i(o,e),o.prototype.write=function(r){return this._array[this._i++]=r,!0},o.prototype.concat=function(){var t,e,i=0,n=new Array(this._array.length),o=this._array,a=0;for(t=0;t<o.length&&void 0!==o[t];t++)"string"!=typeof o[t]?n[t]=o[t].length:n[t]=r.byteLength(o[t]),i+=n[t];for(e=r.allocUnsafe(i),t=0;t<o.length&&void 0!==o[t];t++)"string"!=typeof o[t]?(o[t].copy(e,a),a+=n[t]):(e.write(o[t],a),a+=n[t]);return e},module.exports=n;
},{"safe-buffer":84,"./writeToStream":81,"events":61,"inherits":64}],63:[function(require,module,exports) {
"use strict";exports.parser=require("./parser"),exports.generate=require("./generate"),exports.writeToStream=require("./writeToStream");
},{"./parser":79,"./generate":80,"./writeToStream":81}],65:[function(require,module,exports) {
"use strict";function e(e,r,t){var n=this;this._callback=e,this._args=t,this._interval=setInterval(e,r,this._args),this.reschedule=function(e){e||(e=n._interval),n._interval&&clearInterval(n._interval),n._interval=setInterval(n._callback,e,n._args)},this.clear=function(){n._interval&&(clearInterval(n._interval),n._interval=void 0)},this.destroy=function(){n._interval&&clearInterval(n._interval),n._callback=void 0,n._interval=void 0,n._args=void 0}}function r(){if("function"!=typeof arguments[0])throw new Error("callback needed");if("number"!=typeof arguments[1])throw new Error("interval needed");var r;if(arguments.length>0){r=new Array(arguments.length-2);for(var t=0;t<r.length;t++)r[t]=arguments[t+2]}return new e(arguments[0],arguments[1],r)}module.exports=r;
},{}],60:[function(require,module,exports) {
"use strict";function t(t){for(var r=t.split("/"),e=0;e<r.length;e++)if("+"!==r[e]){if("#"===r[e])return e===r.length-1;if(-1!==r[e].indexOf("+")||-1!==r[e].indexOf("#"))return!1}return!0}function r(r){if(0===r.length)return"empty_topic_list";for(var e=0;e<r.length;e++)if(!t(r[e]))return r[e];return null}module.exports={validateTopics:r};
},{}],47:[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var e=arguments[3],t=require("process"),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=require("events"),o=require("./store"),s=require("end-of-stream"),c=require("mqtt-packet"),r=require("readable-stream").Writable,u=require("inherits"),h=require("reinterval"),a=require("./validations"),p=require("xtend"),d=e.setImmediate||function(e){t.nextTick(e)},l={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0,resubscribe:!0};function g(){return"mqttjs_"+Math.random().toString(16).substr(2,8)}function m(e,t,i){e.emit("packetsend",t),!c.writeToStream(t,e.stream)&&i?e.stream.once("drain",i):i&&i()}function f(e){e&&Object.keys(e).forEach(function(t){"function"==typeof e[t]&&(e[t](new Error("Connection closed")),delete e[t])})}function b(e,t,i){e.outgoingStore.put(t,function(n){if(n)return i&&i(n);m(e,t,i)})}function _(){}function k(e,t){var i,s=this;if(!(this instanceof k))return new k(e,t);for(i in this.options=t||{},l)void 0===this.options[i]?this.options[i]=l[i]:this.options[i]=t[i];this.options.clientId="string"==typeof this.options.clientId?this.options.clientId:g(),this.streamBuilder=e,this.outgoingStore=this.options.outgoingStore||new o,this.incomingStore=this.options.incomingStore||new o,this.queueQoSZero=void 0===this.options.queueQoSZero||this.options.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this.nextId=Math.max(1,Math.floor(65535*Math.random())),this.outgoing={},this.on("connect",function(){if(!this.disconnected){this.connected=!0;var e=this.outgoingStore.createStream();this.once("close",t),e.on("end",function(){s.removeListener("close",t)}),e.on("error",function(e){s.removeListener("close",t),s.emit("error",e)}),function t(){if(e){var i,n=e.read(1);n?s.disconnecting||s.reconnectTimer?e.destroy&&e.destroy():(i=s.outgoing[n.messageId],s.outgoing[n.messageId]=function(e,n){i&&i(e,n),t()},s._sendPacket(n)):e.once("readable",t)}}()}function t(){e.destroy(),e=null}}),this.on("close",function(){this.connected=!1,clearTimeout(this.connackTimer)}),this.on("connect",this._setupPingTimer),this.on("connect",function(){var e=this.queue;!function t(){var i,n=e.shift();n&&(i=n.packet,s._sendPacket(i,function(e){n.cb&&n.cb(e),t()}))}()});var c=!0;this.on("connect",function(){!c&&this.options.clean&&Object.keys(this._resubscribeTopics).length>0&&(this.options.resubscribe?(this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics)):this._resubscribeTopics={}),c=!1}),this.on("close",function(){null!==s.pingTimer&&(s.pingTimer.clear(),s.pingTimer=null)}),this.on("close",this._setupReconnect),n.EventEmitter.call(this),this._setupStream()}u(k,n.EventEmitter),k.prototype._setupStream=function(){var e,i=this,n=new r,o=c.parser(this.options),u=null,h=[];function a(){t.nextTick(p)}function p(){var e=h.shift(),t=u;e?i._handlePacket(e,a):(u=null,t())}this._clearReconnect(),this.stream=this.streamBuilder(this),o.on("packet",function(e){h.push(e)}),n._write=function(e,t,i){u=i,o.parse(e),p()},this.stream.pipe(n),this.stream.on("error",_),s(this.stream,this.emit.bind(this,"close")),(e=Object.create(this.options)).cmd="connect",m(this,e),o.on("error",this.emit.bind(this,"error")),this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(function(){i._cleanUp(!0)},this.options.connectTimeout)},k.prototype._handlePacket=function(e,t){switch(this.emit("packetreceive",e),e.cmd){case"publish":this._handlePublish(e,t);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(e),t();break;case"pubrel":this._handlePubrel(e,t);break;case"connack":this._handleConnack(e),t();break;case"pingresp":this._handlePingresp(e),t()}},k.prototype._checkDisconnecting=function(e){return this.disconnecting&&(e?e(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting},k.prototype.publish=function(e,t,i,n){var o;"function"==typeof i&&(n=i,i=null);if(i=p({qos:0,retain:!1,dup:!1},i),this._checkDisconnecting(n))return this;switch(o={cmd:"publish",topic:e,payload:t,qos:i.qos,retain:i.retain,messageId:this._nextId(),dup:i.dup},i.qos){case 1:case 2:this.outgoing[o.messageId]=n||_,this._sendPacket(o);break;default:this._sendPacket(o,n)}return this},k.prototype.subscribe=function(){var e,t,i=Array.prototype.slice.call(arguments),n=[],o=i.shift(),s=o.resubscribe,c=i.pop()||_,r=i.pop(),u=this;if(delete o.resubscribe,"string"==typeof o&&(o=[o]),"function"!=typeof c&&(r=c,c=_),null!==(t=a.validateTopics(o)))return d(c,new Error("Invalid topic "+t)),this;if(this._checkDisconnecting(c))return this;if(r=p({qos:0},r),Array.isArray(o)?o.forEach(function(e){(u._resubscribeTopics[e]<r.qos||!u._resubscribeTopics.hasOwnProperty(e)||s)&&n.push({topic:e,qos:r.qos})}):Object.keys(o).forEach(function(e){(u._resubscribeTopics[e]<o[e]||!u._resubscribeTopics.hasOwnProperty(e)||s)&&n.push({topic:e,qos:o[e]})}),e={cmd:"subscribe",subscriptions:n,qos:1,retain:!1,dup:!1,messageId:this._nextId()},n.length){if(this.options.resubscribe){var h=[];n.forEach(function(e){u.options.reconnectPeriod>0&&(u._resubscribeTopics[e.topic]=e.qos,h.push(e.topic))}),u.messageIdToTopic[e.messageId]=h}return this.outgoing[e.messageId]=function(e,t){if(!e)for(var i=t.granted,o=0;o<i.length;o+=1)n[o].qos=i[o];c(e,n)},this._sendPacket(e),this}c(null,[])},k.prototype.unsubscribe=function(e,t){var n={cmd:"unsubscribe",qos:1,messageId:this._nextId()},o=this;return t=t||_,this._checkDisconnecting(t)?this:("string"==typeof e?n.unsubscriptions=[e]:"object"===(void 0===e?"undefined":i(e))&&e.length&&(n.unsubscriptions=e),this.options.resubscribe&&n.unsubscriptions.forEach(function(e){delete o._resubscribeTopics[e]}),this.outgoing[n.messageId]=t,this._sendPacket(n),this)},k.prototype.end=function(e,t){var i=this;function n(){i.disconnected=!0,i.incomingStore.close(function(){i.outgoingStore.close(function(){t&&t.apply(null,arguments),i.emit("end")})}),i._deferredReconnect&&i._deferredReconnect()}function o(){i._cleanUp(e,d.bind(null,n))}return"function"==typeof e&&(t=e,e=!1),this.disconnecting?this:(this._clearReconnect(),this.disconnecting=!0,!e&&Object.keys(this.outgoing).length>0?this.once("outgoingEmpty",setTimeout.bind(null,o,10)):o(),this)},k.prototype.removeOutgoingMessage=function(e){var t=this.outgoing[e];return delete this.outgoing[e],this.outgoingStore.del({messageId:e},function(){t(new Error("Message removed"))}),this},k.prototype.reconnect=function(e){var t=this,i=function(){e?(t.options.incomingStore=e.incomingStore,t.options.outgoingStore=e.outgoingStore):(t.options.incomingStore=null,t.options.outgoingStore=null),t.incomingStore=t.options.incomingStore||new o,t.outgoingStore=t.options.outgoingStore||new o,t.disconnecting=!1,t.disconnected=!1,t._deferredReconnect=null,t._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=i:i(),this},k.prototype._reconnect=function(){this.emit("reconnect"),this._setupStream()},k.prototype._setupReconnect=function(){var e=this;!e.disconnecting&&!e.reconnectTimer&&e.options.reconnectPeriod>0&&(this.reconnecting||(this.emit("offline"),this.reconnecting=!0),e.reconnectTimer=setInterval(function(){e._reconnect()},e.options.reconnectPeriod))},k.prototype._clearReconnect=function(){this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)},k.prototype._cleanUp=function(e,t){t&&this.stream.on("close",t),e?(0===this.options.reconnectPeriod&&this.options.clean&&f(this.outgoing),this.stream.destroy()):this._sendPacket({cmd:"disconnect"},d.bind(null,this.stream.end.bind(this.stream))),this.disconnecting||(this._clearReconnect(),this._setupReconnect()),null!==this.pingTimer&&(this.pingTimer.clear(),this.pingTimer=null),t&&!this.connected&&(this.stream.removeListener("close",t),t())},k.prototype._sendPacket=function(e,t){if(this.connected){switch(this._shiftPingInterval(),e.cmd){case"publish":break;case"pubrel":return void b(this,e,t);default:return void m(this,e,t)}switch(e.qos){case 2:case 1:b(this,e,t);break;case 0:default:m(this,e,t)}}else 0===(e.qos||0)&&this.queueQoSZero||"publish"!==e.cmd?this.queue.push({packet:e,cb:t}):e.qos>0?(t=this.outgoing[e.messageId],this.outgoingStore.put(e,function(e){if(e)return t&&t(e)})):t&&t(new Error("No connection to broker"))},k.prototype._setupPingTimer=function(){var e=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=h(function(){e._checkPing()},1e3*this.options.keepalive))},k.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(1e3*this.options.keepalive)},k.prototype._checkPing=function(){this.pingResp?(this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):this._cleanUp(!0)},k.prototype._handlePingresp=function(){this.pingResp=!0},k.prototype._handleConnack=function(e){var t=e.returnCode;if(clearTimeout(this.connackTimer),0===t)this.reconnecting=!1,this.emit("connect",e);else if(t>0){var i=new Error("Connection refused: "+["","Unacceptable protocol version","Identifier rejected","Server unavailable","Bad username or password","Not authorized"][t]);i.code=t,this.emit("error",i)}},k.prototype._handlePublish=function(e,t){t=void 0!==t?t:_;var i=e.topic.toString(),n=e.payload,o=e.qos,s=e.messageId,c=this;switch(o){case 2:this.incomingStore.put(e,function(e){if(e)return t(e);c._sendPacket({cmd:"pubrec",messageId:s},t)});break;case 1:this.emit("message",i,n,e),this.handleMessage(e,function(e){if(e)return t(e);c._sendPacket({cmd:"puback",messageId:s},t)});break;case 0:this.emit("message",i,n,e),this.handleMessage(e,t)}},k.prototype.handleMessage=function(e,t){t()},k.prototype._handleAck=function(e){var t=e.messageId,i=e.cmd,n=null,o=this.outgoing[t],s=this;if(o){switch(i){case"pubcomp":case"puback":delete this.outgoing[t],this.outgoingStore.del(e,o);break;case"pubrec":n={cmd:"pubrel",qos:2,messageId:t},this._sendPacket(n);break;case"suback":if(delete this.outgoing[t],1===e.granted.length&&0!=(128&e.granted[0])){var c=this.messageIdToTopic[t];c&&c.forEach(function(e){delete s._resubscribeTopics[e]})}o(null,e);break;case"unsuback":delete this.outgoing[t],o(null);break;default:s.emit("error",new Error("unrecognized packet type"))}this.disconnecting&&0===Object.keys(this.outgoing).length&&this.emit("outgoingEmpty")}},k.prototype._handlePubrel=function(e,t){t=void 0!==t?t:_;var i=e.messageId,n=this,o={cmd:"pubcomp",messageId:i};n.incomingStore.get(e,function(i,s){i||"pubrel"===s.cmd?n._sendPacket(o,t):(n.emit("message",s.topic,s.payload,s),n.incomingStore.put(e,function(e){if(e)return t(e);n.handleMessage(s,function(e){if(e)return t(e);n._sendPacket(o,t)})}))})},k.prototype._nextId=function(){var e=this.nextId++;return 65536===this.nextId&&(this.nextId=1),e},k.prototype.getLastMessageId=function(){return 1===this.nextId?65535:this.nextId-1},module.exports=k;
},{"events":61,"./store":48,"end-of-stream":62,"mqtt-packet":63,"readable-stream":58,"inherits":64,"reinterval":65,"./validations":60,"xtend":57,"process":56}],67:[function(require,module,exports) {
var global = arguments[3];
var define;
var o,e=arguments[3];!function(n){var r="object"==typeof exports&&exports&&!exports.nodeType&&exports,t="object"==typeof module&&module&&!module.nodeType&&module,u="object"==typeof e&&e;u.global!==u&&u.window!==u&&u.self!==u||(n=u);var i,f,c=2147483647,l=36,s=1,p=26,a=38,d=700,h=72,v=128,g="-",w=/^xn--/,x=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,m={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},C=l-s,b=Math.floor,j=String.fromCharCode;function A(o){throw new RangeError(m[o])}function I(o,e){for(var n=o.length,r=[];n--;)r[n]=e(o[n]);return r}function E(o,e){var n=o.split("@"),r="";return n.length>1&&(r=n[0]+"@",o=n[1]),r+I((o=o.replace(y,".")).split("."),e).join(".")}function F(o){for(var e,n,r=[],t=0,u=o.length;t<u;)(e=o.charCodeAt(t++))>=55296&&e<=56319&&t<u?56320==(64512&(n=o.charCodeAt(t++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),t--):r.push(e);return r}function O(o){return I(o,function(o){var e="";return o>65535&&(e+=j((o-=65536)>>>10&1023|55296),o=56320|1023&o),e+=j(o)}).join("")}function S(o,e){return o+22+75*(o<26)-((0!=e)<<5)}function T(o,e,n){var r=0;for(o=n?b(o/d):o>>1,o+=b(o/e);o>C*p>>1;r+=l)o=b(o/C);return b(r+(C+1)*o/(o+a))}function L(o){var e,n,r,t,u,i,f,a,d,w,x,y=[],m=o.length,C=0,j=v,I=h;for((n=o.lastIndexOf(g))<0&&(n=0),r=0;r<n;++r)o.charCodeAt(r)>=128&&A("not-basic"),y.push(o.charCodeAt(r));for(t=n>0?n+1:0;t<m;){for(u=C,i=1,f=l;t>=m&&A("invalid-input"),((a=(x=o.charCodeAt(t++))-48<10?x-22:x-65<26?x-65:x-97<26?x-97:l)>=l||a>b((c-C)/i))&&A("overflow"),C+=a*i,!(a<(d=f<=I?s:f>=I+p?p:f-I));f+=l)i>b(c/(w=l-d))&&A("overflow"),i*=w;I=T(C-u,e=y.length+1,0==u),b(C/e)>c-j&&A("overflow"),j+=b(C/e),C%=e,y.splice(C++,0,j)}return O(y)}function M(o){var e,n,r,t,u,i,f,a,d,w,x,y,m,C,I,E=[];for(y=(o=F(o)).length,e=v,n=0,u=h,i=0;i<y;++i)(x=o[i])<128&&E.push(j(x));for(r=t=E.length,t&&E.push(g);r<y;){for(f=c,i=0;i<y;++i)(x=o[i])>=e&&x<f&&(f=x);for(f-e>b((c-n)/(m=r+1))&&A("overflow"),n+=(f-e)*m,e=f,i=0;i<y;++i)if((x=o[i])<e&&++n>c&&A("overflow"),x==e){for(a=n,d=l;!(a<(w=d<=u?s:d>=u+p?p:d-u));d+=l)I=a-w,C=l-w,E.push(j(S(w+I%C,0))),a=b(I/C);E.push(j(S(a,0))),u=T(n,m,r==t),n=0,++r}++n,++e}return E.join("")}if(i={version:"1.4.1",ucs2:{decode:F,encode:O},decode:L,encode:M,toASCII:function(o){return E(o,function(o){return x.test(o)?"xn--"+M(o):o})},toUnicode:function(o){return E(o,function(o){return w.test(o)?L(o.slice(4).toLowerCase()):o})}},"function"==typeof o&&"object"==typeof o.amd&&o.amd)o("punycode",function(){return i});else if(r&&t)if(module.exports==r)t.exports=i;else for(f in i)i.hasOwnProperty(f)&&(r[f]=i[f]);else n.punycode=i}(this);
},{}],66:[function(require,module,exports) {
"use strict";module.exports={isString:function(n){return"string"==typeof n},isObject:function(n){return"object"==typeof n&&null!==n},isNull:function(n){return null===n},isNullOrUndefined:function(n){return null==n}};
},{}],82:[function(require,module,exports) {
"use strict";function r(r,e){return Object.prototype.hasOwnProperty.call(r,e)}module.exports=function(t,n,o,a){n=n||"&",o=o||"=";var s={};if("string"!=typeof t||0===t.length)return s;var p=/\+/g;t=t.split(n);var u=1e3;a&&"number"==typeof a.maxKeys&&(u=a.maxKeys);var c=t.length;u>0&&c>u&&(c=u);for(var i=0;i<c;++i){var y,l,f,v,b=t[i].replace(p,"%20"),d=b.indexOf(o);d>=0?(y=b.substr(0,d),l=b.substr(d+1)):(y=b,l=""),f=decodeURIComponent(y),v=decodeURIComponent(l),r(s,f)?e(s[f])?s[f].push(v):s[f]=[s[f],v]:s[f]=v}return s};var e=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)};
},{}],83:[function(require,module,exports) {
"use strict";var n=function(n){switch(typeof n){case"string":return n;case"boolean":return n?"true":"false";case"number":return isFinite(n)?n:"";default:return""}};module.exports=function(o,u,c,a){return u=u||"&",c=c||"=",null===o&&(o=void 0),"object"==typeof o?r(t(o),function(t){var a=encodeURIComponent(n(t))+c;return e(o[t])?r(o[t],function(e){return a+encodeURIComponent(n(e))}).join(u):a+encodeURIComponent(n(o[t]))}).join(u):a?encodeURIComponent(n(a))+c+encodeURIComponent(n(o)):""};var e=Array.isArray||function(n){return"[object Array]"===Object.prototype.toString.call(n)};function r(n,e){if(n.map)return n.map(e);for(var r=[],t=0;t<n.length;t++)r.push(e(n[t],t));return r}var t=Object.keys||function(n){var e=[];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.push(r);return e};
},{}],68:[function(require,module,exports) {
"use strict";exports.decode=exports.parse=require("./decode"),exports.encode=exports.stringify=require("./encode");
},{"./decode":82,"./encode":83}],55:[function(require,module,exports) {
"use strict";var t=require("punycode"),s=require("./util");function h(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}exports.parse=b,exports.resolve=O,exports.resolveObject=d,exports.format=q,exports.Url=h;var e=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,r=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,o=["<",">",'"',"`"," ","\r","\n","\t"],n=["{","}","|","\\","^","`"].concat(o),i=["'"].concat(n),l=["%","/","?",";","#"].concat(i),p=["/","?","#"],c=255,u=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=require("querystring");function b(t,e,a){if(t&&s.isObject(t)&&t instanceof h)return t;var r=new h;return r.parse(t,e,a),r}function q(t){return s.isString(t)&&(t=b(t)),t instanceof h?t.format():h.prototype.format.call(t)}function O(t,s){return b(t,!1,!0).resolve(s)}function d(t,s){return t?b(t,!1,!0).resolveObject(s):s}h.prototype.parse=function(h,a,o){if(!s.isString(h))throw new TypeError("Parameter 'url' must be a string, not "+typeof h);var n=h.indexOf("?"),b=-1!==n&&n<h.indexOf("#")?"?":"#",q=h.split(b);q[0]=q[0].replace(/\\/g,"/");var O=h=q.join(b);if(O=O.trim(),!o&&1===h.split("#").length){var d=r.exec(O);if(d)return this.path=O,this.href=O,this.pathname=d[1],d[2]?(this.search=d[2],this.query=a?y.parse(this.search.substr(1)):this.search.substr(1)):a&&(this.search="",this.query={}),this}var j=e.exec(O);if(j){var x=(j=j[0]).toLowerCase();this.protocol=x,O=O.substr(j.length)}if(o||j||O.match(/^\/\/[^@\/]+@[^@\/]+/)){var A="//"===O.substr(0,2);!A||j&&v[j]||(O=O.substr(2),this.slashes=!0)}if(!v[j]&&(A||j&&!g[j])){for(var C,I,w=-1,U=0;U<p.length;U++){-1!==(k=O.indexOf(p[U]))&&(-1===w||k<w)&&(w=k)}-1!==(I=-1===w?O.lastIndexOf("@"):O.lastIndexOf("@",w))&&(C=O.slice(0,I),O=O.slice(I+1),this.auth=decodeURIComponent(C)),w=-1;for(U=0;U<l.length;U++){var k;-1!==(k=O.indexOf(l[U]))&&(-1===w||k<w)&&(w=k)}-1===w&&(w=O.length),this.host=O.slice(0,w),O=O.slice(w),this.parseHost(),this.hostname=this.hostname||"";var N="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!N)for(var R=this.hostname.split(/\./),S=(U=0,R.length);U<S;U++){var $=R[U];if($&&!$.match(u)){for(var z="",H=0,L=$.length;H<L;H++)$.charCodeAt(H)>127?z+="x":z+=$[H];if(!z.match(u)){var Z=R.slice(0,U),_=R.slice(U+1),E=$.match(f);E&&(Z.push(E[1]),_.unshift(E[2])),_.length&&(O="/"+_.join(".")+O),this.hostname=Z.join(".");break}}}this.hostname.length>c?this.hostname="":this.hostname=this.hostname.toLowerCase(),N||(this.hostname=t.toASCII(this.hostname));var P=this.port?":"+this.port:"",T=this.hostname||"";this.host=T+P,this.href+=this.host,N&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==O[0]&&(O="/"+O))}if(!m[x])for(U=0,S=i.length;U<S;U++){var B=i[U];if(-1!==O.indexOf(B)){var D=encodeURIComponent(B);D===B&&(D=escape(B)),O=O.split(B).join(D)}}var F=O.indexOf("#");-1!==F&&(this.hash=O.substr(F),O=O.slice(0,F));var G=O.indexOf("?");if(-1!==G?(this.search=O.substr(G),this.query=O.substr(G+1),a&&(this.query=y.parse(this.query)),O=O.slice(0,G)):a&&(this.search="",this.query={}),O&&(this.pathname=O),g[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){P=this.pathname||"";var J=this.search||"";this.path=P+J}return this.href=this.format(),this},h.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var h=this.protocol||"",e=this.pathname||"",a=this.hash||"",r=!1,o="";this.host?r=t+this.host:this.hostname&&(r=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&s.isObject(this.query)&&Object.keys(this.query).length&&(o=y.stringify(this.query));var n=this.search||o&&"?"+o||"";return h&&":"!==h.substr(-1)&&(h+=":"),this.slashes||(!h||g[h])&&!1!==r?(r="//"+(r||""),e&&"/"!==e.charAt(0)&&(e="/"+e)):r||(r=""),a&&"#"!==a.charAt(0)&&(a="#"+a),n&&"?"!==n.charAt(0)&&(n="?"+n),h+r+(e=e.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(n=n.replace("#","%23"))+a},h.prototype.resolve=function(t){return this.resolveObject(b(t,!1,!0)).format()},h.prototype.resolveObject=function(t){if(s.isString(t)){var e=new h;e.parse(t,!1,!0),t=e}for(var a=new h,r=Object.keys(this),o=0;o<r.length;o++){var n=r[o];a[n]=this[n]}if(a.hash=t.hash,""===t.href)return a.href=a.format(),a;if(t.slashes&&!t.protocol){for(var i=Object.keys(t),l=0;l<i.length;l++){var p=i[l];"protocol"!==p&&(a[p]=t[p])}return g[a.protocol]&&a.hostname&&!a.pathname&&(a.path=a.pathname="/"),a.href=a.format(),a}if(t.protocol&&t.protocol!==a.protocol){if(!g[t.protocol]){for(var c=Object.keys(t),u=0;u<c.length;u++){var f=c[u];a[f]=t[f]}return a.href=a.format(),a}if(a.protocol=t.protocol,t.host||v[t.protocol])a.pathname=t.pathname;else{for(var m=(t.pathname||"").split("/");m.length&&!(t.host=m.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==m[0]&&m.unshift(""),m.length<2&&m.unshift(""),a.pathname=m.join("/")}if(a.search=t.search,a.query=t.query,a.host=t.host||"",a.auth=t.auth,a.hostname=t.hostname||t.host,a.port=t.port,a.pathname||a.search){var y=a.pathname||"",b=a.search||"";a.path=y+b}return a.slashes=a.slashes||t.slashes,a.href=a.format(),a}var q=a.pathname&&"/"===a.pathname.charAt(0),O=t.host||t.pathname&&"/"===t.pathname.charAt(0),d=O||q||a.host&&t.pathname,j=d,x=a.pathname&&a.pathname.split("/")||[],A=(m=t.pathname&&t.pathname.split("/")||[],a.protocol&&!g[a.protocol]);if(A&&(a.hostname="",a.port=null,a.host&&(""===x[0]?x[0]=a.host:x.unshift(a.host)),a.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===m[0]?m[0]=t.host:m.unshift(t.host)),t.host=null),d=d&&(""===m[0]||""===x[0])),O)a.host=t.host||""===t.host?t.host:a.host,a.hostname=t.hostname||""===t.hostname?t.hostname:a.hostname,a.search=t.search,a.query=t.query,x=m;else if(m.length)x||(x=[]),x.pop(),x=x.concat(m),a.search=t.search,a.query=t.query;else if(!s.isNullOrUndefined(t.search)){if(A)a.hostname=a.host=x.shift(),(k=!!(a.host&&a.host.indexOf("@")>0)&&a.host.split("@"))&&(a.auth=k.shift(),a.host=a.hostname=k.shift());return a.search=t.search,a.query=t.query,s.isNull(a.pathname)&&s.isNull(a.search)||(a.path=(a.pathname?a.pathname:"")+(a.search?a.search:"")),a.href=a.format(),a}if(!x.length)return a.pathname=null,a.search?a.path="/"+a.search:a.path=null,a.href=a.format(),a;for(var C=x.slice(-1)[0],I=(a.host||t.host||x.length>1)&&("."===C||".."===C)||""===C,w=0,U=x.length;U>=0;U--)"."===(C=x[U])?x.splice(U,1):".."===C?(x.splice(U,1),w++):w&&(x.splice(U,1),w--);if(!d&&!j)for(;w--;w)x.unshift("..");!d||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),I&&"/"!==x.join("/").substr(-1)&&x.push("");var k,N=""===x[0]||x[0]&&"/"===x[0].charAt(0);A&&(a.hostname=a.host=N?"":x.length?x.shift():"",(k=!!(a.host&&a.host.indexOf("@")>0)&&a.host.split("@"))&&(a.auth=k.shift(),a.host=a.hostname=k.shift()));return(d=d||a.host&&x.length)&&!N&&x.unshift(""),x.length?a.pathname=x.join("/"):(a.pathname=null,a.path=null),s.isNull(a.pathname)&&s.isNull(a.search)||(a.path=(a.pathname?a.pathname:"")+(a.search?a.search:"")),a.auth=t.auth||a.auth,a.slashes=a.slashes||t.slashes,a.href=a.format(),a},h.prototype.parseHost=function(){var t=this.host,s=a.exec(t);s&&(":"!==(s=s[0])&&(this.port=s.substr(1)),t=t.substr(0,t.length-s.length)),t&&(this.hostname=t)};
},{"punycode":67,"./util":66,"querystring":68}],49:[function(require,module,exports) {
"use strict";var t=require("net");function o(o,e){var r,n;return e.port=e.port||1883,e.hostname=e.hostname||e.host||"localhost",r=e.port,n=e.hostname,t.createConnection(r,n)}module.exports=o;
},{"net":69}],50:[function(require,module,exports) {
"use strict";var e=require("tls");function r(r,t){var o;function n(e){t.rejectUnauthorized&&r.emit("error",e),o.end()}return t.port=t.port||8883,t.host=t.hostname||t.host||"localhost",t.rejectUnauthorized=!1!==t.rejectUnauthorized,delete t.path,(o=e.connect(t)).on("secureConnect",function(){t.rejectUnauthorized&&!o.authorized?o.emit("error",new Error("TLS not authorized")):o.removeListener("error",n)}),o.on("error",n),o}module.exports=r;
},{"tls":69}],130:[function(require,module,exports) {
function e(e){var t=e._readableState;return t?t.objectMode?e.read():e.read(r(t)):null}function r(e){return e.buffer.length?e.buffer.head?e.buffer.head.data.length:e.buffer[0].length:e.length}module.exports=e;
},{}],104:[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var process = require("process");
var t=require("buffer").Buffer,e=require("process"),i=require("readable-stream"),r=require("end-of-stream"),n=require("inherits"),s=require("stream-shift"),o=t.from&&t.from!==Uint8Array.from?t.from([0]):new t([0]),a=function(t,e){t._corked?t.once("uncork",e):e()},d=function(t,e){t._autoDestroy&&t.destroy(e)},h=function(t,e){return function(i){i?d(t,"premature close"===i.message?null:i):e&&!t._ended&&t.end()}},l=function(t,e){return t?t._writableState&&t._writableState.finished?e():t._writableState?t.end(e):(t.end(),void e()):e()},u=function(t){return new i.Readable({objectMode:!0,highWaterMark:16}).wrap(t)},_=function(t,e,r){if(!(this instanceof _))return new _(t,e,r);i.Duplex.call(this,r),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!r||!1!==r.autoDestroy,this._forwardDestroy=!r||!1!==r.destroy,this._forwardEnd=!r||!1!==r.end,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,t&&this.setWritable(t),e&&this.setReadable(e)};n(_,i.Duplex),_.obj=function(t,e,i){return i||(i={}),i.objectMode=!0,i.highWaterMark=16,new _(t,e,i)},_.prototype.cork=function(){1==++this._corked&&this.emit("cork")},_.prototype.uncork=function(){this._corked&&0==--this._corked&&this.emit("uncork")},_.prototype.setWritable=function(t){if(this._unwrite&&this._unwrite(),this.destroyed)t&&t.destroy&&t.destroy();else if(null!==t&&!1!==t){var i=this,n=r(t,{writable:!0,readable:!1},h(this,this._forwardEnd)),s=function(){var t=i._ondrain;i._ondrain=null,t&&t()};this._unwrite&&e.nextTick(s),this._writable=t,this._writable.on("drain",s),this._unwrite=function(){i._writable.removeListener("drain",s),n()},this.uncork()}else this.end()},_.prototype.setReadable=function(t){if(this._unread&&this._unread(),this.destroyed)t&&t.destroy&&t.destroy();else{if(null===t||!1===t)return this.push(null),void this.resume();var e=this,i=r(t,{writable:!1,readable:!0},h(this)),n=function(){e._forward()},s=function(){e.push(null)};this._drained=!0,this._readable=t,this._readable2=t._readableState?t:u(t),this._readable2.on("readable",n),this._readable2.on("end",s),this._unread=function(){e._readable2.removeListener("readable",n),e._readable2.removeListener("end",s),i()},this._forward()}},_.prototype._read=function(){this._drained=!0,this._forward()},_.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){var t;for(this._forwarding=!0;this._drained&&null!==(t=s(this._readable2));)this.destroyed||(this._drained=this.push(t));this._forwarding=!1}},_.prototype.destroy=function(t){if(!this.destroyed){this.destroyed=!0;var i=this;e.nextTick(function(){i._destroy(t)})}},_.prototype._destroy=function(t){if(t){var e=this._ondrain;this._ondrain=null,e?e(t):this.emit("error",t)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},_.prototype._write=function(t,e,i){return this.destroyed?i():this._corked?a(this,this._write.bind(this,t,e,i)):t===o?this._finish(i):this._writable?void(!1===this._writable.write(t)?this._ondrain=i:i()):i()},_.prototype._finish=function(t){var e=this;this.emit("preend"),a(this,function(){l(e._forwardEnd&&e._writable,function(){!1===e._writableState.prefinished&&(e._writableState.prefinished=!0),e.emit("prefinish"),a(e,t)})})},_.prototype.end=function(t,e,r){return"function"==typeof t?this.end(null,null,t):"function"==typeof e?this.end(t,null,e):(this._ended=!0,t&&this.write(t),this._writableState.ending||this.write(o),i.Writable.prototype.end.call(this,r))},module.exports=_;
},{"readable-stream":58,"end-of-stream":62,"inherits":64,"stream-shift":130,"buffer":119,"process":56}],103:[function(require,module,exports) {
var e=null;"undefined"!=typeof WebSocket?e=WebSocket:"undefined"!=typeof MozWebSocket?e=MozWebSocket:"undefined"!=typeof window&&(e=window.WebSocket||window.MozWebSocket),module.exports=e;
},{}],78:[function(require,module,exports) {

var process = require("process");
var global = arguments[3];
var e=require("process"),r=arguments[3],o=require("readable-stream").Transform,t=require("duplexify"),n=require("ws"),f=require("safe-buffer").Buffer;function i(e,r,t){var n=new o({objectMode:e.objectMode});return n._write=r,n._flush=t,n}function u(o,u,a){var c,s,y="browser"===e.title,b=!!r.WebSocket,d=y?function e(r,o,t){if(s.bufferedAmount>p)return void setTimeout(e,m,r,o,t);v&&"string"==typeof r&&(r=f.from(r,"utf8"));try{s.send(r)}catch(e){return t(e)}t()}:function(e,r,o){if(s.readyState!==s.OPEN)return void o();v&&"string"==typeof e&&(e=f.from(e,"utf8"));s.send(e,o)};u&&!Array.isArray(u)&&"object"==typeof u&&(a=u,u=null,("string"==typeof a.protocol||Array.isArray(a.protocol))&&(u=a.protocol)),a||(a={}),void 0===a.objectMode&&(a.objectMode=!(!0===a.binary||void 0===a.binary));var l=i(a,d,function(e){s.close(),e()});a.objectMode||(l._writev=function(e,r){for(var o=new Array(e.length),t=0;t<e.length;t++)"string"==typeof e[t].chunk?o[t]=f.from(e[t],"utf8"):o[t]=e[t].chunk;this._write(f.concat(o),"binary",r)});var p=a.browserBufferSize||524288,m=a.browserBufferTimeout||1e3;"object"==typeof o?s=o:(s=b&&y?new n(o,u):new n(o,u,a)).binaryType="arraybuffer",s.readyState===s.OPEN?c=l:(c=t.obj(),s.onopen=function(){c.setReadable(l),c.setWritable(l),c.emit("connect")}),c.socket=s,s.onclose=function(){c.end(),c.destroy()},s.onerror=function(e){c.destroy(e)},s.onmessage=function(e){var r=e.data;r=r instanceof ArrayBuffer?f.from(r):f.from(r,"utf8");l.push(r)},l.on("close",function(){s.close()});var v=!a.objectMode;return c}module.exports=u;
},{"readable-stream":58,"duplexify":104,"ws":103,"safe-buffer":84,"process":56}],51:[function(require,module,exports) {
"use strict";var o=!1,t=[];function n(n){o?wx.sendSocketMessage({data:n.buffer||n}):t.push(n)}function e(e,r){var s={OPEN:1,CLOSING:2,CLOSED:3,readyState:o?1:0,send:n,close:wx.closeSocket,onopen:null,onmessage:null,onclose:null,onerror:null};return wx.connectSocket({url:e,protocols:r}),wx.onSocketOpen(function(e){s.readyState=s.OPEN,o=!0;for(var r=0;r<t.length;r++)n(t[r]);t=[],s.onopen&&s.onopen.apply(s,arguments)}),wx.onSocketMessage(function(o){s.onmessage&&s.onmessage.apply(s,arguments)}),wx.onSocketClose(function(){s.onclose&&s.onclose.apply(s,arguments),s.readyState=s.CLOSED,o=!1}),wx.onSocketError(function(){s.onerror&&s.onerror.apply(s,arguments),s.readyState=s.CLOSED,o=!1}),s}var r=require("websocket-stream");function s(o,t){var n="wxs"===o.protocol?"wss":"ws",e=n+"://"+o.hostname+o.path;return o.port&&80!==o.port&&443!==o.port&&(e=n+"://"+o.hostname+":"+o.port+o.path),"function"==typeof o.transformWsUrl&&(e=o.transformWsUrl(e,o,t)),e}function a(o){o.hostname||(o.hostname="localhost"),o.path||(o.path="/"),o.wsOptions||(o.wsOptions={})}function c(o,t){var n="MQIsdp"===t.protocolId&&3===t.protocolVersion?"mqttv3.1":"mqtt";a(t);var c=s(t,o);return r(e(c,[n]))}function l(o,t){if(t.hostname=t.hostname||t.host,!t.hostname)throw new Error("Could not determine host. Specify host manually.");return c(o,t)}module.exports=l;
},{"websocket-stream":78}],52:[function(require,module,exports) {
var process = require("process");
var o=require("process"),t=require("websocket-stream"),r=require("url"),e=["rejectUnauthorized","ca","cert","key","pfx","passphrase"],n="browser"===o.title;function s(o,t){var r=o.protocol+"://"+o.hostname+":"+o.port+o.path;return"function"==typeof o.transformWsUrl&&(r=o.transformWsUrl(r,o,t)),r}function p(o){o.hostname||(o.hostname="localhost"),o.port||("wss"===o.protocol?o.port=443:o.port=80),o.path||(o.path="/"),o.wsOptions||(o.wsOptions={}),n||"wss"!==o.protocol||e.forEach(function(t){o.hasOwnProperty(t)&&!o.wsOptions.hasOwnProperty(t)&&(o.wsOptions[t]=o[t])})}function a(o,r){var e="MQIsdp"===r.protocolId&&3===r.protocolVersion?"mqttv3.1":"mqtt";p(r);var n=s(r,o);return t(n,[e],r.wsOptions)}function i(o,t){return a(o,t)}function c(o,t){if(t.hostname||(t.hostname=t.host),!t.hostname){if("undefined"==typeof document)throw new Error("Could not determine host. Specify host manually.");var e=r.parse(document.URL);t.hostname=e.hostname,t.port||(t.port=e.port)}return a(o,t)}module.exports=n?c:i;
},{"websocket-stream":78,"url":55,"process":56}],23:[function(require,module,exports) {
var process = require("process");
var o=require("process"),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},t=require("../client"),e=require("../store"),n=require("url"),c=require("xtend"),s={};function l(o){var r;o.auth&&((r=o.auth.match(/^(.+):(.+)$/))?(o.username=r[1],o.password=r[2]):o.username=o.auth)}function u(o,e){if("object"!==(void 0===o?"undefined":r(o))||e||(e=o,o=null),e=e||{},o){var u=n.parse(o,!0);if(null!=u.port&&(u.port=Number(u.port)),null===(e=c(u,e)).protocol)throw new Error("Missing protocol");e.protocol=e.protocol.replace(/:$/,"")}if(l(e),e.query&&"string"==typeof e.query.clientId&&(e.clientId=e.query.clientId),e.cert&&e.key){if(!e.protocol)throw new Error("Missing secure protocol key");if(-1===["mqtts","wss","wxs"].indexOf(e.protocol))switch(e.protocol){case"mqtt":e.protocol="mqtts";break;case"ws":e.protocol="wss";break;case"wx":e.protocol="wxs";break;default:throw new Error('Unknown protocol for secure connection: "'+e.protocol+'"!')}}if(!s[e.protocol]){var i=-1!==["mqtts","wss"].indexOf(e.protocol);e.protocol=["mqtt","mqtts","ws","wss","wx","wxs"].filter(function(o,r){return(!i||r%2!=0)&&"function"==typeof s[o]})[0]}if(!1===e.clean&&!e.clientId)throw new Error("Missing clientId for unclean clients");return e.protocol&&(e.defaultProtocol=e.protocol),new t(function(o){return e.servers&&(o._reconnectCount&&o._reconnectCount!==e.servers.length||(o._reconnectCount=0),e.host=e.servers[o._reconnectCount].host,e.port=e.servers[o._reconnectCount].port,e.protocol=e.servers[o._reconnectCount].protocol?e.servers[o._reconnectCount].protocol:e.defaultProtocol,e.hostname=e.host,o._reconnectCount++),s[e.protocol](o,e)},e)}"browser"!==o.title?(s.mqtt=require("./tcp"),s.tcp=require("./tcp"),s.ssl=require("./tls"),s.tls=require("./tls"),s.mqtts=require("./tls")):(s.wx=require("./wx"),s.wxs=require("./wx")),s.ws=require("./ws"),s.wss=require("./ws"),module.exports=u,module.exports.connect=u,module.exports.MqttClient=t,module.exports.Store=e;
},{"../client":47,"../store":48,"url":55,"xtend":57,"./tcp":49,"./tls":50,"./wx":51,"./ws":52,"process":56}],24:[function(require,module,exports) {
"use strict";function e(e,r,t){return{kind:"coordinate",args:{x:e,y:r,z:t}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.coordinate=e;
},{}],25:[function(require,module,exports) {
"use strict";function r(r){var e=function(r){return r&&"{"===JSON.stringify(r)[0]};return e(r)&&"string"==typeof r.kind&&function(r){return e(r)&&!!r.args}(r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isCeleryScript=r;
},{}],26:[function(require,module,exports) {
"use strict";function e(){return"undefined"==typeof window}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNode=e;
},{}],27:[function(require,module,exports) {
"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o};function t(t,e,r){var n=t[e];return void 0===(void 0===n?"undefined":o(n))?r:n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.pick=t;
},{}],29:[function(require,module,exports) {
"use strict";function x(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(x){var e=16*Math.random()|0;return("x"===x?e:3&e|8).toString(16)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.uuid=x;
},{}],28:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./uuid");function r(r){return{kind:"rpc_request",args:{label:e.uuid()},body:r}}exports.rpcRequest=r;
},{"./uuid":29}],9:[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./util/coordinate")),e(require("./util/is_celery_script")),e(require("./util/is_node")),e(require("./util/pick")),e(require("./util/rpc_request")),e(require("./util/uuid"));
},{"./util/coordinate":24,"./util/is_celery_script":25,"./util/is_node":26,"./util/pick":27,"./util/rpc_request":28,"./util/uuid":29}],21:[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./util"),r="Unable to parse token. Is it properly formatted?";exports.CONFIG_DEFAULTS={speed:100};var o="MISSING_MQTT_USERNAME",s="NOTE TO NODEJS USERS:\n\nThis library requires an 'atob()' function.\nPlease fix this first.\nSOLUTION: https://github.com/FarmBot/farmbot-js/issues/33",n=function(e){try{return JSON.parse(atob(e.split(".")[1]))}catch(e){throw console.warn(e),new Error(r)}};exports.generateConfig=function(r){if(t.isNode()&&!e.atob)throw new Error(s);var a=n(r.token);return{speed:r.speed||exports.CONFIG_DEFAULTS.speed,token:r.token,secure:!1!==r.secure,mqttServer:t.isNode()?"mqtt://"+a.mqtt+":1883":a.mqtt_ws,mqttUsername:a.bot||o,LAST_PING_OUT:0,LAST_PING_IN:0}};
},{"./util":9}],53:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.outboundChanFor=function(r,e,o,n,t){return void 0===t&&(t=0),["bot",r,"resources_v0",e,o,n,t].join("/")},exports.internalError={kind:"rpc_error",args:{label:"BROWSER_LEVEL_FAILURE"},body:[{kind:"explanation",args:{message:"Tried to perform batch operation before connect."}}]},exports.resolveOrReject=function(r,e){return function(o){return("rpc_ok"==o.kind?r:e)(o)}};
},{}],54:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./support");exports.rejectRpc=function(){return Promise.reject(e.internalError)};
},{"./support":53}],22:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require(".."),r=require("./support"),t=require("./reject_rpc"),n=function(){return function(n,o){var i=this;this.parent=n,this.username=o,this.destroy=function(e){var r=i.parent.client;return r?i.doDestroy(r,e.kind,e.id):t.rejectRpc()},this.save=function(e){var r=i.parent.client;return r?i.doSave(r,e):t.rejectRpc()},this.destroyAll=function(e){return Promise.all(e.map(function(e){return i.destroy(e)}))},this.doDestroy=function(t,n,o){return new Promise(function(u,s){var a=e.uuid();i.parent.on(a,r.resolveOrReject(u,s)),t.publish(r.outboundChanFor(i.username,"destroy",n,a,o),"")})},this.doSave=function(t,n){return new Promise(function(o,u){var s=e.uuid();i.parent.on(s,r.resolveOrReject(o,u));var a=r.outboundChanFor(i.username,"save",n.kind,s,n.body.id);t.publish(a,JSON.stringify(n.body))})}}}();exports.ResourceAdapter=n;
},{"..":3,"./support":53,"./reject_rpc":54}],7:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("mqtt"),n=require("./util"),r=require("./util"),t=require("./config"),s=require("./resources/resource_adapter");exports.NULL="null";var i=1e3,o=function(){function o(a){var c=this;this.getConfig=function(e){return c.config[e]},this.setConfig=function(e,n){c.config[e]=n},this.installFarmware=function(e){return c.send(n.rpcRequest([{kind:"install_farmware",args:{url:e}}]))},this.updateFarmware=function(e){return c.send(n.rpcRequest([{kind:"update_farmware",args:{package:e}}]))},this.removeFarmware=function(e){return c.send(n.rpcRequest([{kind:"remove_farmware",args:{package:e}}]))},this.installFirstPartyFarmware=function(){return c.send(n.rpcRequest([{kind:"install_first_party_farmware",args:{}}]))},this.powerOff=function(){return c.send(n.rpcRequest([{kind:"power_off",args:{}}]))},this.reboot=function(){var e=n.rpcRequest([{kind:"reboot",args:{package:"farmbot_os"}}]);return c.send(e)},this.rebootFirmware=function(){var e=n.rpcRequest([{kind:"reboot",args:{package:"arduino_firmware"}}]);return c.send(e)},this.checkUpdates=function(){return c.send(n.rpcRequest([{kind:"check_updates",args:{package:"farmbot_os"}}]))},this.resetOS=function(){return c.publish(n.rpcRequest([{kind:"factory_reset",args:{package:"farmbot_os"}}]))},this.resetMCU=function(){return c.send(n.rpcRequest([{kind:"factory_reset",args:{package:"arduino_firmware"}}]))},this.emergencyLock=function(){return c.send(n.rpcRequest([{kind:"emergency_lock",args:{}}]))},this.emergencyUnlock=function(){return c.send(n.rpcRequest([{kind:"emergency_unlock",args:{}}]))},this.execSequence=function(e,r){return void 0===r&&(r=[]),c.send(n.rpcRequest([{kind:"execute",args:{sequence_id:e},body:r}]))},this.execScript=function(e,r){return c.send(n.rpcRequest([{kind:"execute_script",args:{label:e},body:r}]))},this.home=function(e){return c.send(n.rpcRequest([{kind:"home",args:e}]))},this.findHome=function(e){return c.send(n.rpcRequest([{kind:"find_home",args:e}]))},this.moveAbsolute=function(e){var r=e.x,s=e.y,i=e.z,o=e.speed||t.CONFIG_DEFAULTS.speed;return c.send(n.rpcRequest([{kind:"move_absolute",args:{location:n.coordinate(r,s,i),offset:n.coordinate(0,0,0),speed:o}}]))},this.moveRelative=function(e){var r=e.x,s=e.y,i=e.z,o=e.speed||t.CONFIG_DEFAULTS.speed;return c.send(n.rpcRequest([{kind:"move_relative",args:{x:r,y:s,z:i,speed:o}}]))},this.writePin=function(e){return c.send(n.rpcRequest([{kind:"write_pin",args:e}]))},this.readPin=function(e){return c.send(n.rpcRequest([{kind:"read_pin",args:e}]))},this.togglePin=function(e){return c.send(n.rpcRequest([{kind:"toggle_pin",args:e}]))},this.readStatus=function(e){return void 0===e&&(e={}),c.send(n.rpcRequest([{kind:"read_status",args:e}]))},this.takePhoto=function(e){return void 0===e&&(e={}),c.send(n.rpcRequest([{kind:"take_photo",args:e}]))},this.sync=function(e){return void 0===e&&(e={}),c.send(n.rpcRequest([{kind:"sync",args:e}]))},this.setZero=function(e){return c.send(n.rpcRequest([{kind:"zero",args:{axis:e}}]))},this.updateMcu=function(e){var t=[];return Object.keys(e).forEach(function(n){var s=r.pick(e,n,"ERROR");t.push({kind:"config_update",args:{package:"arduino_firmware"},body:[{kind:"pair",args:{value:s,label:n}}]})}),c.send(n.rpcRequest(t))},this.setUserEnv=function(e){var r=Object.keys(e).map(function(n){return{kind:"pair",args:{label:n,value:e[n]||exports.NULL}}});return c.send(n.rpcRequest([{kind:"set_user_env",args:{},body:r}]))},this.setServoAngle=function(e){var r=c.send(n.rpcRequest([{kind:"set_servo_angle",args:e}]));if(![4,5].includes(e.pin_number))throw new Error("Servos only work on pins 4 and 5");if(e.pin_value>360||e.pin_value<0)throw new Error("Pin value outside of 0...360 range");return r},this.updateConfig=function(e){var t=Object.keys(e).map(function(n){return{kind:"pair",args:{value:r.pick(e,n,"ERROR"),label:n}}});return c.send(n.rpcRequest([{kind:"config_update",args:{package:"farmbot_os"},body:t}]))},this.calibrate=function(e){return c.send(n.rpcRequest([{kind:"calibrate",args:e}]))},this.dumpInfo=function(){return c.send(n.rpcRequest([{kind:"dump_info",args:{}}]))},this.event=function(e){return c._events[e]=c._events[e]||[],c._events[e]},this.on=function(e,n){return c.event(e).push(n)},this.emit=function(e,n){[c.event(e),c.event("*")].forEach(function(r){r.forEach(function(r){try{r(n,e)}catch(n){console.warn("Exception thrown while handling `"+e+"` event."),console.dir(n)}})})},this.publish=function(e,n){if(void 0===n&&(n=!0),c.client)c.emit("sent",e),c.client.publish(c.channel.toDevice,JSON.stringify(e));else if(n)throw new Error("Not connected to server")},this.send=function(e){return new Promise(function(n,r){c.publish(e),c.on(e.args.label,function(e){switch(e.kind){case"rpc_ok":return n(e);case"rpc_error":var t=(e.body||[]).map(function(e){return e.args.message}).join(", ");return r(new Error("Problem sending RPC command: "+t));default:throw console.dir(e),new Error("Got a bad CeleryScript node.")}})})},this._onmessage=function(e,n){try{var t=JSON.parse(n.toString());switch(e){case c.channel.logs:return c.emit("logs",t);case c.channel.status:return c.emit("status",t);case c.channel.toClient:case c.channel.fromAPI:default:if(e.includes("sync"))return c.emit("sync",t);if(r.isCeleryScript(t))return c.emit(t.args.label,t);console.warn("Unhandled inbound message from "+e),c.emit("malformed",t)}}catch(e){console.warn("Could not parse inbound message from MQTT."),c.emit("malformed",n.toString())}},this.connect=function(){var r=c.config,t=r.mqttUsername,a=r.token,u=r.mqttServer,d=e.connect(u,{username:t,password:a,clean:!0,clientId:"FBJS-"+o.VERSION+"-"+n.uuid(),reconnectPeriod:i});c.client=d,c.resources=new s.ResourceAdapter(c,c.config.mqttUsername),d.on("message",c._onmessage),d.on("offline",function(){return c.emit("offline",{})}),d.on("connect",function(){return c.emit("online",{})});var f=[c.channel.fromAPI,c.channel.logs,c.channel.status,c.channel.sync,c.channel.toClient];return d.subscribe(f),new Promise(function(e,n){var r=c.client;if(!r)throw new Error("Please connect first.");r.once("connect",function(){return e(c)})})},this._events={},this.config=t.generateConfig(a),this.resources=new s.ResourceAdapter(this,this.config.mqttUsername)}return Object.defineProperty(o.prototype,"channel",{get:function(){var e=this.config.mqttUsername;return{toDevice:"bot/"+e+"/from_clients",toClient:"bot/"+e+"/from_device",status:"bot/"+e+"/status",logs:"bot/"+e+"/logs",sync:"bot/"+e+"/sync/#",fromAPI:"bot/"+e+"/from_api"}},enumerable:!0,configurable:!0}),o.VERSION="7.0.0-rc0",o}();exports.Farmbot=o;
},{"mqtt":23,"./util":9,"./config":21,"./resources/resource_adapter":22}],8:[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),function(e){e[e.unknown=-1]="unknown",e[e.quadrature=0]="quadrature",e[e.differential=1]="differential"}(e=exports.Encoder||(exports.Encoder={}));
},{}],10:[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),function(e){e.DIRTY="DIRTY",e.SAVING="SAVING",e.SAVED=""}(e=exports.SpecialStatus||(exports.SpecialStatus={}));
},{}],3:[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./corpus")),e(require("./farmbot")),e(require("./interfaces")),e(require("./util")),e(require("./resources/tagged_resource"));
},{"./corpus":6,"./farmbot":7,"./interfaces":8,"./util":9,"./resources/tagged_resource":10}],1:[function(require,module,exports) {
window.fbjs=require("./index.ts");
},{"./index.ts":3}]},{},[1], null)
//# sourceMappingURL=/farmbot_single_file.map